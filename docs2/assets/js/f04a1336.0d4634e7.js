"use strict";(self.webpackChunkdockview_docs=self.webpackChunkdockview_docs||[]).push([[835],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return c}});var l=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},a=Object.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=l.createContext({}),r=function(e){var t=l.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=r(e.components);return l.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},h=l.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,u=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),h=r(n),c=i,k=h["".concat(u,".").concat(c)]||h[c]||d[c]||a;return n?l.createElement(k,s(s({ref:t},m),{},{components:n})):l.createElement(k,s({ref:t},m))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=h;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var r=2;r<a;r++)s[r]=n[r];return l.createElement.apply(null,s)}return l.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3314:function(e,t,n){n.d(t,{m:function(){return o}});var l=n(7294),i=100,a=300,s=function(e,t,n,l){var s=[].concat(n),o=s.filter((function(t,n){return n<=e})),u=s.filter((function(t,n){return n>e})),r={leftmin:void 0,leftmax:void 0,rightmin:void 0,rightmax:void 0,max:void 0,min:void 0};if(l>2){var m=o.map((function(e){return i-e})).reduce((function(e,t){return e+t}),0),d=o.map((function(e){return a-e})).reduce((function(e,t){return e+t}),0),h=u.map((function(e){return e-i})).reduce((function(e,t){return e+t}),0),c=u.map((function(e){return e-a})).reduce((function(e,t){return e+t}),0),k=Math.max(m,c),p=Math.min(d,h);r={leftmin:m,leftmax:d,rightmin:h,rightmax:c,max:p,min:k},t=Math.max(k,Math.min(p,t))}for(var f=0,b=t,v=o.length-1;v>-1;v--){var w=Math.max(i,Math.min(a,o[v]+b)),g=w-o[v];f+=g,b-=g,o[v]=w}if(l>1)for(var x=0;x<u.length;x++){var y=Math.max(i,Math.min(a,u[x]-f));f+=y-u[x],u[x]=y}return Object.assign({},r,{sizes:[].concat(o,u)})},o=function(e){var t=l.useState({sashes:[200,400],views:[200,200,200],deltas:[0,0,0],left:0,right:0,debug:void 0,drag:-1}),n=t[0],o=t[1],u=l.useRef(),r=l.useMemo((function(){return!e.debug||!n.debug||e.mode<3?null:l.createElement(l.Fragment,null,l.createElement("div",{style:{left:n.debug.leftmax-40+"px",top:"-30px"},className:"debug-sash-text"},"left-max"),l.createElement("div",{style:{left:n.debug.leftmin-40+"px",top:"-30px"},className:"debug-sash-text"},"left-min"),l.createElement("div",{style:{left:n.debug.rightmax-40+"px",bottom:"-30px"},className:"debug-sash-text"},"right-max"),l.createElement("div",{style:{left:n.debug.rightmin-40+"px",bottom:"-30px"},className:"debug-sash-text"},"right-min"),l.createElement("div",{className:"debug-sash-max",style:{left:n.debug.leftmax-1+"px",border:"2px solid purple"}}),l.createElement("div",{className:"debug-sash-max",style:{left:n.debug.leftmin-1+"px",border:"2px solid green"}}),l.createElement("div",{className:"debug-sash-min",style:{left:n.debug.rightmax-1+"px",border:"2px solid cyan"}}),l.createElement("div",{className:"debug-sash-min",style:{left:n.debug.rightmin-1+"px",border:"2px solid pink"}}))}),[n.debug]);return l.createElement("div",{className:"splitview-math-blog",style:{marginBottom:"40px",marginTop:"30px",backgroundColor:"gray"}},e.debug&&l.createElement("div",{style:{marginBottom:r?"25px":"0px"}},l.createElement("span",null,"Change to left "+(null==n?void 0:n.left)),l.createElement("span",{style:{marginLeft:"10px",backgroundColor:-(null==n?void 0:n.right)!==(null==n?void 0:n.left)?"red":""}},"Change to right "+(null==n?void 0:n.right)),l.createElement("span",{style:{marginLeft:"10px"}},"Total size "+(null==n?void 0:n.views.reduce((function(e,t){return e+t}),0)))),l.createElement("div",{ref:u,style:{height:"100px",width:"100%",position:"relative",backgroundColor:"dimgray"}},l.createElement("div",{className:"sash-container"},n.sashes.map((function(t,i){var a,r=n.drag===i?"sash drag-sash":"sash";return l.createElement("div",{key:i,onMouseDown:(a=i,function(t){var l=t.clientX,i=[].concat(n.views),r=function(t){var n,r=t.clientX,m=s(a,r-l,i,e.mode),d=m.sizes,h=m.rightmin,c=m.rightmax,k=m.leftmin,p=m.leftmax,f=m.max,b=m.min,v=d.reduce((function(e,t){return[].concat(e,[t+(0===e.length?0:e[e.length-1])])}),[]);v.splice(v.length-1,1);var w=i.map((function(e,t){return d[t]-e})),g=l-(null==(n=u.current)?void 0:n.getBoundingClientRect().left);o({views:d,sashes:v,deltas:w,left:w.filter((function(e,t){return t<=a})).reduce((function(e,t){return e+t}),0),right:w.filter((function(e,t){return t>a})).reduce((function(e,t){return e+t}),0),debug:{leftmax:p+g,leftmin:k+g,rightmax:c+g,rightmin:h+g,min:b+g,max:f+g},drag:a})};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(t){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e),o((function(e){return Object.assign({},e,{deltas:e.deltas.map((function(e){return 0})),left:0,right:0,drag:-1})}))}))}),style:{left:t-2+"px"},className:r})})),r),l.createElement("div",{className:"view-container"},n.views.map((function(t,s){var o=t>=a,u=t<=i;return l.createElement("div",{key:s,style:{left:(0===s?0:n.sashes[s-1])+"px",width:t+"px"},className:"view"},e.debug&&l.createElement(l.Fragment,null,l.createElement("div",null,n.views[s]+" ("+(n.deltas[s]>-1?"+":"")+n.deltas[s]+")"),l.createElement("div",{style:{fontSize:"12px"}},"isMin = "+u),l.createElement("div",{style:{fontSize:"12px"}},"isMax = "+o)))})))))}},9993:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return r},default:function(){return k},frontMatter:function(){return u},metadata:function(){return m},toc:function(){return h}});var l=n(7462),i=n(3366),a=(n(7294),n(3905)),s=n(3314),o=["components"],u={},r=void 0,m={permalink:"/dockview/docs2/blog/math/math",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/math/math.mdx",source:"@site/blog/math/math.mdx",title:"math/math",description:"Wondering how to create a resizable split view, pane or window; whichever you may call it?",date:"2022-05-21T17:43:41.000Z",formattedDate:"May 21, 2022",tags:[],readingTime:10.585,truncated:!1,authors:[],frontMatter:{},nextItem:{title:"Dockview 1.4.2",permalink:"/dockview/docs2/blog/dockview-1.4.2-release"}},d={authorsImageUrls:[]},h=[{value:"First of all, what is a split view control?",id:"first-of-all-what-is-a-split-view-control",level:2},{value:"Iteration #1 - The naive approach (aka. the accordian)",id:"iteration-1---the-naive-approach-aka-the-accordian",level:2},{value:"Iteration #2 - \u0394 is added. Then \u0394 must be removed",id:"iteration-2---\u03b4-is-added-then-\u03b4-must-be-removed",level:2},{value:"Iteration #3 - Constraining the values of \u0394",id:"iteration-3---constraining-the-values-of-\u03b4",level:2},{value:"Appendix",id:"appendix",level:2},{value:"The clamp function",id:"the-clamp-function",level:3}],c={toc:h};function k(e){var t=e.components,u=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,l.Z)({},c,u,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Wondering how to create a resizable split view, pane or window; whichever you may call it?\nHere's a langauge indepedant walkthrough of how to design a split view control from scratch and the simple math behind it.\nYou will find links to all examples which are written using TypeScript."),(0,a.kt)("p",null,"Here's the end result and you can continue to read on to see how we got here."),(0,a.kt)(s.m,{mode:3,debug:!1,mdxType:"Splitview"}),(0,a.kt)("h2",{id:"first-of-all-what-is-a-split-view-control"},"First of all, what is a split view control?"),(0,a.kt)("p",null,"Not all split view controls are born equal, but for our purposes"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"A split view control is comprised from a number of 'views' layed out either horizontally or vertically.\nEach view can be indepedantly resized by dragging on the edge of a particular view.")),(0,a.kt)("p",null,"In order to explain how this works we are going to need some more in-depth definitions so lets start with the two\nfundamental components of this control, the ",(0,a.kt)("b",null,"View")," and the ",(0,a.kt)("b",null,"Sash")," (I will explain).\nThe below assumes the split view control has ",(0,a.kt)("b",null,"n")," views, where n is positive number.\nFor example if n=4 then our split view controls has 4 views. This generic approach will make it much easier to explain going forwards."),(0,a.kt)("div",null,(0,a.kt)("div",null,"View"),(0,a.kt)("ul",{style:{marginLeft:"40px"}},(0,a.kt)("li",null,"The size of the n",(0,a.kt)("sup",null,"th")," view will be known as V",(0,a.kt)("sub",null,"n")),(0,a.kt)("li",null,"The minimum size of the n",(0,a.kt)("sup",null,"th")," view will be known as V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"n")),(0,a.kt)("li",null,"The maximum size of the n",(0,a.kt)("sup",null,"th")," view will be known as V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"n")))),(0,a.kt)("p",null,"Additional by definition we can known V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"n")," <= V",(0,a.kt)("sub",null,"n")," <= V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"n")),(0,a.kt)("p",null,"To be able to resize a view we need to be able to drag on the edge of a view to increase or decrease it's size.\nThis can be achieved by introducing a narrow component that sits between each view acting as a 'drag handle'.\nWe will call this component a ",(0,a.kt)("b",null,"Sash")," because sash is also the word for those ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Sash_window"},"windows")," with movable panels."),(0,a.kt)("div",null,(0,a.kt)("div",null,"Sash"),(0,a.kt)("ul",{style:{marginLeft:"40px"}},(0,a.kt)("li",null,"If we have n views then we will have n-1 sashes. There is no sash before V",(0,a.kt)("sub",null,"0")," nor after V",(0,a.kt)("sub",null,"n")),(0,a.kt)("li",null,"The sash between V",(0,a.kt)("sub",null,"n")," and V",(0,a.kt)("sub",null,"n+1")," is known as S",(0,a.kt)("sub",null,"n")),(0,a.kt)("li",null,"The sash is of fixed width, and it's sole purpose is to act a drag-handle for resizing views"))),(0,a.kt)("p",null,"This now gives us a definition of the split view control but in additional to that, to calculate the new view sizes\nafter a sash is dragged we need to know which sash is being dragged.\nWe will denote the sash S",(0,a.kt)("sub",null,"i")," as the sash to drag going forwards we can reference the following diagram."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt txt",src:n(9310).Z,width:"1000",height:"150"})),(0,a.kt)("p",null,"If we are to drag the sash S",(0,a.kt)("sub",null,"i")," then we need to also know how far along the x-axis, or the horizontal-axis we have travelled.\nWe can denote this as the delta, using the symbol \u0394.\nDelta is only limited by how wide the screen is so for this purpose we can say it ranges from negative to positive infinity, that is -\u221e < \u0394 < \u221e ."),(0,a.kt)("p",null,"In reality as you will see we will apply a set of constraints on the value of \u0394 reducing it's overall set of valid values."),(0,a.kt)("h2",{id:"iteration-1---the-naive-approach-aka-the-accordian"},"Iteration #1 - The naive approach (aka. the accordian)"),(0,a.kt)("p",null,"As I add delta I increase view sizes and as I remove delta I decrease view sizes.\nA rather naive approach but it could look something like this:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"as the sash moves left shrink each view to the left and as the sash moves right expand each view to left, from right-most to left-most in both caes."),(0,a.kt)("li",{parentName:"ul"},"If there is enough delta to shrink a view to it's mimimum size then move onto the next view, and if we have enough delta to expand a view to it's maximum size then again move onto the next view."),(0,a.kt)("li",{parentName:"ul"},"Shrink no more once everything to the left is at minimums and expand no more once everything to the left is at maximums"),(0,a.kt)("li",{parentName:"ul"},"We don't manipulate any views to the right of the active sash S",(0,a.kt)("sub",null,"i"))),(0,a.kt)("p",null,"You should be able to show each of the four points above hold true for the below interactive example.\nYou'll see that changes to the right will always remain at zero because we are not manipulating views to the right of the active sash."),(0,a.kt)(s.m,{mode:1,debug:!0,mdxType:"Splitview"}),(0,a.kt)("p",null,"There are some obvious flaws with this approach but before we go into that lets put this implemenation in psuedocode using our definitions\nfrom above where we drag sash S",(0,a.kt)("sub",null,"i")," by an amount \u0394"),(0,a.kt)("div",{style:{display:"inline-block",marginLeft:"20px",marginBottom:"20px",borderLeft:"2px solid black"}},(0,a.kt)("div",{className:"markdown-line"},"\u0394",(0,a.kt)("sub",null,"remaining")," = \u0394"),(0,a.kt)("div",{className:"markdown-line"},(0,a.kt)("span",{style:{fontWeight:"bold"}},"for"),(0,a.kt)("span",null,"(",(0,a.kt)("span",{style:{fontStyle:"italic"}},"j = i; j >= 0; i--"),")"),(0,a.kt)("span",{style:{fontWeight:"bold"}}," do")),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")," = ",(0,a.kt)("span",{style:{fontWeight:"bold"}},"Min"),"(V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"j"),", ",(0,a.kt)("span",{style:{fontWeight:"bold"}},"Max"),"(V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j"),", V",(0,a.kt)("sub",null,"j")," + \u0394",(0,a.kt)("sub",null,"remaining"),"))")),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j")," = V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sub",null,"remaining")," = \u0394",(0,a.kt)("sub",null,"remaining")," - V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sub",null,"j")," = V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")))),(0,a.kt)("p",null,"or in plain text"),(0,a.kt)("div",{style:{borderLeft:"2px solid black",margin:"0px 20px 20px 20px",display:"flex",flexDirection:"row"}},(0,a.kt)("div",{style:{borderRight:"2px solid black",flexShrink:0,width:"20px"}},(0,a.kt)("div",{style:{display:"flex",justifyContent:"center"}},"1"),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center"}},"2"),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center"}},"3"),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center"}},"4")),(0,a.kt)("div",{style:{flexGrow:1,marginLeft:"20px"}},(0,a.kt)("div",null,"For each view j to the left of the sash we have dragged, from right-most to left-most"),(0,a.kt)("div",null,"Add the delta to the view j (clamped at either the maximum or minimum value)"),(0,a.kt)("div",null,"Subtract the different between the new and old size (the used delta) from the remaining delta"),(0,a.kt)("div",null,"repeat"))),(0,a.kt)("p",null,"Going back to that obvious flaw, the width of the control does not remain constant. It flexes with \u0394."),(0,a.kt)("h2",{id:"iteration-2---\u03b4-is-added-then-\u03b4-must-be-removed"},"Iteration #2 - \u0394 is added. Then \u0394 must be removed"),(0,a.kt)("p",null,"We want a component of constant width and we dont want to think too hard.\nSo If I have added \u0394 to the left then I should add -\u0394 (or remove \u0394) on the right, and vice-versa; right? Nearly."),(0,a.kt)(s.m,{mode:2,debug:!0,mdxType:"Splitview"}),(0,a.kt)("p",null,"There are some more subtle flaws with this approach; but lets describe it in psuedocode first.\nWe now need another variable to track the delta we've added on the left, \u0394",(0,a.kt)("sub",null,"used"),".\nAfter we've applied changes to the left side we'll substract this \u0394",(0,a.kt)("sub",null,"used")," from the right side which should keep the width of our control at a\nconstant size."),(0,a.kt)("div",{style:{display:"inline-block",marginLeft:"20px",marginBottom:"20px",borderLeft:"2px solid black"}},(0,a.kt)("div",{className:"markdown-line"},"\u0394",(0,a.kt)("sub",null,"remaining")," = \u0394"),(0,a.kt)("div",{className:"markdown-line markdown-highlight"},"\u0394",(0,a.kt)("sub",null,"used")," = 0"),(0,a.kt)("div",{className:"markdown-line"},(0,a.kt)("span",{style:{fontWeight:"bold"}},"for"),(0,a.kt)("span",null,"(",(0,a.kt)("span",{style:{fontStyle:"italic"}},"j = i; j >= 0; i--"),")"),(0,a.kt)("span",{style:{fontWeight:"bold"}}," do")),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")," = ",(0,a.kt)("span",{style:{fontWeight:"bold"}},"Min"),"(V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"j"),", ",(0,a.kt)("span",{style:{fontWeight:"bold"}},"Max"),"(V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j"),", V",(0,a.kt)("sub",null,"j")," + \u0394",(0,a.kt)("sub",null,"remaining"),"))")),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j")," = V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sub",null,"remaining")," = \u0394",(0,a.kt)("sub",null,"remaining")," - V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{className:"markdown-line indent-1 markdown-highlight"},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sub",null,"used")," = \u0394",(0,a.kt)("sub",null,"used")," + V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{className:"markdown-line indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sub",null,"j")," = V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{style:{height:"0px",width:"100%",marginBottom:"20px"}}),(0,a.kt)("div",{className:"markdown-line markdown-highlight"},(0,a.kt)("span",{style:{fontWeight:"bold"}},"for"),(0,a.kt)("span",null,"(",(0,a.kt)("span",{style:{fontStyle:"italic"}},"j = i+1; j < n; i++"),")"),(0,a.kt)("span",{style:{fontWeight:"bold"}}," do")),(0,a.kt)("div",{className:"markdown-line markdown-highlight indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")," = ",(0,a.kt)("span",{style:{fontWeight:"bold"}},"Min"),"(V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"j"),", ",(0,a.kt)("span",{style:{fontWeight:"bold"}},"Max"),"(V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j"),",V",(0,a.kt)("sub",null,"j")," - \u0394",(0,a.kt)("sub",null,"used"),"))")),(0,a.kt)("div",{className:"markdown-line markdown-highlight indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j")," = V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{className:"markdown-line markdown-highlight indent-1"},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sub",null,"used")," = \u0394",(0,a.kt)("sub",null,"used")," + V",(0,a.kt)("sup",null,"\u0394"),(0,a.kt)("sub",null,"j"))),(0,a.kt)("div",{style:{marginBottom:"20px"},className:"markdown-line markdown-highlight indent-1"},(0,a.kt)("span",null,"V",(0,a.kt)("sub",null,"j")," = V",(0,a.kt)("sup",null,"next"),(0,a.kt)("sub",null,"j")))),(0,a.kt)("p",null,"Go back and try to minimise or maximise every view in the container. The width is no longer preserved, you can see at some point the change to the left\nis not longer eqaul to the change on the right, which causes the container to once again flex."),(0,a.kt)("h2",{id:"iteration-3---constraining-the-values-of-\u03b4"},"Iteration #3 - Constraining the values of \u0394"),(0,a.kt)("p",null,"In the cases where iteration #2 is not working correctly this can be explained as either adding or removing too much delta.\nFortunately it turns out there are a few constraints we can define on delta to help with this.\nFor a sash S",(0,a.kt)("sub",null,"i")," lets think about the minimum and maximum amount of delta we can use.\nTry to follow the explainations first and then we will use another interactive example and diagram to reinforce the explaination."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"S",(0,a.kt)("sub",null,"i")," can go no further left that the sum of the minimum sizes of the views to the left, and can go no further right than the sum of the\nminimum sizes of the views to the right; because otherwise you would end up with at least one view that is smaller than it's specified minimum.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Another less obvious condition on S",(0,a.kt)("sub",null,"i")," is that it can go no further left that the sum of the maximum sizes of the views to the right, and can go no further\nright than the sum of maximum sizes to the left; because otherwise you would end up with at least one view that is larger than it's specified maximum.")),(0,a.kt)("p",null,"This leaves us with 4 constraints we need to apply on \u0394; but since \u0394 is relative to S",(0,a.kt)("sub",null,"i")," first of all we need these\nconstraints relative to S",(0,a.kt)("sub",null,"i"),". That is to say what amount of \u0394 is equivalent to the constraints we just described."),(0,a.kt)("p",null,"When the views to the left of S",(0,a.kt)("sub",null,"i")," are all at minimum size we will call the distance between here and \u0394 to be \u0394",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"left"),".\nThis distance would be the sum of the differences between\nV",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j")," and V",(0,a.kt)("sub",null,"j")," for each view, or in more format notation we could write this as"),(0,a.kt)("div",{style:{margin:"20px"}},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"left")," = \u03a3 V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sub",null,"j")),(0,a.kt)("span",{style:{marginLeft:"20px"}},"j = i,...0")),(0,a.kt)("p",null,"Similarly we can work out the distance between S",(0,a.kt)("sub",null,"i")," and the point at each every view to the left is at its\nmaximum size as the sum of differences between V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"j")," an V",(0,a.kt)("sub",null,"j")),(0,a.kt)("div",{style:{margin:"20px"}},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"left")," = \u03a3 V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sub",null,"j")),(0,a.kt)("span",{style:{marginLeft:"20px"}},"j = i,...0")),(0,a.kt)("p",null,"The same logic can be applied to work out those values for \u0394",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"right")," and \u0394",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"right")),(0,a.kt)("div",{style:{margin:"20px"}},(0,a.kt)("div",{style:{marginBottom:"10px"}},(0,a.kt)("span",null,"\u0394",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"right")," = \u03a3 V",(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j")),(0,a.kt)("span",{style:{marginLeft:"20px"}},"j = i+1...n")),(0,a.kt)("div",null,(0,a.kt)("span",null,"\u0394",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"right")," = \u03a3 V",(0,a.kt)("sub",null,"j")," - V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"j")),(0,a.kt)("span",{style:{marginLeft:"20px"}},"j = i+1...n"))),(0,a.kt)("p",null,"We now have two minimum constraints which are V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"left")," and V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"right")," and two maximum\nconstraints V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"left")," and V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"right"),".\nTo get one minimum and maximum value for the \u0394 we should take the maximum of the two minimums and the minimum of the two maximums which will\nensure all four constraints will hold true."),(0,a.kt)("div",{style:{margin:"20px"}},(0,a.kt)("div",{style:{marginBottom:"10px"}},"\u0394",(0,a.kt)("sub",null,"min")," = MAX ( V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"left")," , V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"right")," )"),(0,a.kt)("div",null,"\u0394",(0,a.kt)("sub",null,"max")," = MIN ( V",(0,a.kt)("sup",null,"max"),(0,a.kt)("sub",null,"left")," , V",(0,a.kt)("sup",null,"min"),(0,a.kt)("sub",null,"right")," )")),(0,a.kt)("p",null,"Finally we must clamp our \u0394 to be within this minimum and maxium boundary.\nThis clamped delta can be used in place of delta in the pseudocode from iteration #2."),(0,a.kt)("div",{style:{margin:"20px"}},"\u0394",(0,a.kt)("sub",null,"clamped")," = MIN ( V",(0,a.kt)("sub",null,"max")," , MAX ( V",(0,a.kt)("sub",null,"min")," , \u0394 ) )"),(0,a.kt)("p",null,"You can see how this works in this interactive example which also shows the current values of our four constraints for each sash drag event."),(0,a.kt)(s.m,{mode:3,debug:!0,mdxType:"Splitview"}),(0,a.kt)("p",null,"Additionally you can see in the below diagram how all of our above calculations come together to give a minimum and maximum constraints on \u0394."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt txt",src:n(6074).Z,width:"640",height:"796"})),(0,a.kt)("h2",{id:"appendix"},"Appendix"),(0,a.kt)("h3",{id:"the-clamp-function"},"The clamp function"),(0,a.kt)("p",null,"To clamp a value is to say given a value, a minimum and a maximum return"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"the minimum, if value < minimum"),(0,a.kt)("li",{parentName:"ul"},"the maximum if value > maximum"),(0,a.kt)("li",{parentName:"ul"},"otherwise returning the value")),(0,a.kt)("p",null,"In otherwords we have 'clamped' the value to be within our defined minimum and maximum values. Mathematically we can write this as"),(0,a.kt)("div",{style:{marginBottom:"20px"},className:"markdown-line"},(0,a.kt)("b",null,"f"),"(value, value",(0,a.kt)("sub",null,"min"),", value",(0,a.kt)("sub",null,"max"),") = ",(0,a.kt)("b",null,"MIN"),"(value",(0,a.kt)("sub",null,"max"),", ",(0,a.kt)("b",null,"MAX"),"(value",(0,a.kt)("sub",null,"min"),", value))"),(0,a.kt)("p",null,"with some examples"),(0,a.kt)("div",{style:{marginLeft:"20px",marginBottom:"20px"}},(0,a.kt)("div",{className:"markdown-small-line"},(0,a.kt)("b",null,"f"),"(10, 20, 30) = 20"),(0,a.kt)("div",{className:"markdown-small-line"},(0,a.kt)("b",null,"f"),"(40, 20, 30) = 30"),(0,a.kt)("div",{className:"markdown-small-line"},(0,a.kt)("b",null,"f"),"(25, 20, 30) = 25")))}k.isMDXComponent=!0},6074:function(e,t,n){t.Z=n.p+"assets/images/constraints-583ccd1bac2f3efa4a8f09eb4ddb9f79.jpg"},9310:function(e,t,n){t.Z=n.p+"assets/images/visual_1-3454ea2dfb88d99f580d3f635a7eac1d.jpg"}}]);