"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{1351:function(e,t,n){function o(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function s(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{tu:function(){return hu},$R:function(){return ju},i5:function(){return le},Vm:function(){return Hu},TU:function(){return ku}});var c=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}var h,p=function e(){o(this,e)},d=function(e){u(n,e);var t=f(n);function n(e,i,r){var a;return o(this,n),(a=t.call(this)).viewId=e,a.groupId=i,a.panelId=r,a}return n}(p),v=function(e){u(n,e);var t=f(n);function n(e,i){var r;return o(this,n),(r=t.call(this)).viewId=e,r.paneId=i,r}return n}(p),m=function(){function e(){o(this,e)}var t,n,i;return t=e,i=[{key:"getInstance",value:function(){return e.INSTANCE}}],(n=[{key:"hasData",value:function(e){return e&&e===this.proto}},{key:"clearData",value:function(e){this.hasData(e)&&(this.proto=void 0,this.data=void 0)}},{key:"getData",value:function(e){if(this.hasData(e))return this.data}},{key:"setData",value:function(e,t){t&&(this.data=e,this.proto=t)}}])&&r(t.prototype,n),i&&r(t,i),e}();function y(){var e=m.getInstance();if(e.hasData(d.prototype))return e.getData(d.prototype)[0]}function b(){var e=m.getInstance();if(e.hasData(v.prototype))return e.getData(v.prototype)[0]}function g(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}m.INSTANCE=new m,(h||(h={})).any=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=t.map((function(t){return t(e)}));return{dispose:function(){n.forEach((function(e){e.dispose()}))}}}};var S=function(){function e(t){g(this,e),this.options=t,this._listeners=[],this._disposed=!1}return _(e,[{key:"event",get:function(){if(!this._event){var e=this;this._event=function(t){var n,i=e;return(null===(n=e.options)||void 0===n?void 0:n.replay)&&void 0!==e._last&&t(e._last),e._listeners.push(t),{dispose:function(){var e=i._listeners.indexOf(t);e>-1&&i._listeners.splice(e,1)}}}}return this._event}},{key:"fire",value:function(e){this._last=e;var t=!0,n=!1,i=void 0;try{for(var o,r=this._listeners[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){(0,o.value)(e)}}catch(a){n=!0,i=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}},{key:"dispose",value:function(){this._listeners=[],this._disposed=!0}}]),e}();function k(e,t,n,i){return e.addEventListener(t,n,i),{dispose:function(){e.removeEventListener(t,n)}}}function O(e,t,n,i){return e.addEventListener(t,n,i),{dispose:function(){e.removeEventListener(t,n)}}}var C,D=function(){function e(){g(this,e),this._onFired=new S,this.onEvent=this._onFired.event}return _(e,[{key:"fire",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e._onFired.fire(),clearTimeout(e.timer)}))}},{key:"dispose",value:function(){this._onFired.dispose()}}]),e}();function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function E(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function z(e,t,n){return(z=A()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&I(o,n.prototype),o}).apply(null,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(C||(C={})).NONE={dispose:function(){}};var T=function(){function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];E(this,e),this.disposables=n}return R(e,[{key:"addDisposables",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this;t.forEach((function(e){return i.disposables.push(e)}))}},{key:"dispose",value:function(){this.disposables.forEach((function(e){return e.dispose()}))}}],[{key:"from",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return z(e,j(n))}}]),e}(),N=function(){function e(){E(this,e),this._disposable=C.NONE}return R(e,[{key:"value",set:function(e){this._disposable&&this._disposable.dispose(),this._disposable=e}},{key:"dispose",value:function(){this._disposable&&(this._disposable.dispose(),this._disposable=C.NONE)}}]),e}();function V(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function G(e,t,n){return(G="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return M(this,n)}}function J(e,t){var n=new ResizeObserver((function(e){var n=e[0];t(n)}));return n.observe(e),{dispose:function(){n.unobserve(e),n.disconnect()}}}var U=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=!0,r=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;e.classList.contains(l)&&e.classList.remove(l)}}catch(c){r=!0,a=c}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}},Z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=!0,r=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;e.classList.contains(l)||e.classList.add(l)}}catch(c){r=!0,a=c}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}},X=function(e,t,n){var i=e.classList.contains(t);n&&!i&&e.classList.add(t),!n&&i&&e.classList.remove(t)};function $(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function Y(e){return Array.prototype.slice.call(document.getElementsByTagName(e),0)}function K(e){return new Q(e)}var Q=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(r,e);var t,n,i,o=W(r);function r(e){var t;!function(e,t){if(!V(e,t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this))._onDidFocus=new S,t.onDidFocus=t._onDidFocus.event,t._onDidBlur=new S,t.onDidBlur=t._onDidBlur.event;var n,i,a=$(document.activeElement,e),u=!1,s=function(){u=!1,a||(a=!0,t._onDidFocus.fire())},l=function(){a&&(u=!0,window.setTimeout((function(){u&&(u=!1,a=!1,t._onDidBlur.fire())}),0))};return t._refreshStateHandler=function(){$(document.activeElement,e)!==a&&(a?l():s())},n=e,(null!=(i=HTMLElement)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):V(n,i))?(t.addDisposables(O(e,"focus",s,!0)),t.addDisposables(O(e,"blur",l,!0))):(t.addDisposables(k(e,"focus",s,!0)),t.addDisposables(k(e,"blur",l,!0))),t}return t=r,(n=[{key:"refreshState",value:function(){this._refreshStateHandler()}},{key:"dispose",value:function(){G(H(r.prototype),"dispose",this).call(this),this._onDidBlur.dispose(),this._onDidFocus.dispose()}}])&&L(t.prototype,n),i&&L(t,i),r}(T),q=function(e,t,n){if(t>n)throw new Error("".concat(t," > ").concat(n," is an invalid condition"));return Math.min(n,Math.max(e,t))},ee=function(){var e=1;return{next:function(){return(e++).toString()}}};function te(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}function ne(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ie(e,t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function oe(e,t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}var re=function(e,t){var n=[];if("number"!==typeof t&&(t=e,e=0),e<=t)for(var i=e;i<t;i++)n.push(i);else for(var o=e;o>t;o--)n.push(o);return n};function ae(e,t){for(var n=0;n<e.length;n++){if(t(e[n]))return n}return-1}function ue(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var le,ce,fe,he,pe,de,ve,me,ye=function(){function e(t,n,i,o){ue(this,e),this.container=t,this.view=n,this.disposable=o,this._cachedVisibleSize=void 0,"number"===typeof i?(this._size=i,this._cachedVisibleSize=void 0,t.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}var t,n,i;return t=e,(n=[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"cachedVisibleSize",get:function(){return this._cachedVisibleSize}},{key:"visible",get:function(){return"undefined"===typeof this._cachedVisibleSize}},{key:"setVisible",value:function(e,t){var n;e!==this.visible&&(e?(this.size=q(null!==(n=this._cachedVisibleSize)&&void 0!==n?n:0,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"===typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}},{key:"minimumSize",get:function(){return this.visible?this.view.minimumSize:0}},{key:"viewMinimumSize",get:function(){return this.view.minimumSize}},{key:"maximumSize",get:function(){return this.visible?this.view.maximumSize:0}},{key:"viewMaximumSize",get:function(){return this.view.maximumSize}},{key:"priority",get:function(){return this.view.priority}},{key:"snap",get:function(){return!!this.view.snap}},{key:"enabled",set:function(e){this.container.style.pointerEvents=e?"":"none"}},{key:"dispose",value:function(){return this.disposable.dispose(),this.view}}])&&se(t.prototype,n),i&&se(t,i),e}();function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ge(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function we(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _e(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ce=le||(le={})).HORIZONTAL="HORIZONTAL",ce.VERTICAL="VERTICAL",(he=fe||(fe={}))[he.MAXIMUM=0]="MAXIMUM",he[he.MINIMUM=1]="MINIMUM",he[he.DISABLED=2]="DISABLED",he[he.ENABLED=3]="ENABLED",(de=pe||(pe={})).Low="low",de.High="high",de.Normal="normal",(me=ve||(ve={})).Distribute={type:"distribute"},me.Split=function(e){return{type:"split",index:e}},me.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}};var Se=function(){function e(t,n){var i=this;if(ge(this,e),this.container=t,this.views=[],this.sashes=[],this._size=0,this._orthogonalSize=0,this.contentSize=0,this._proportions=void 0,this._onDidSashEnd=new S,this.onDidSashEnd=this._onDidSashEnd.event,this._onDidAddView=new S,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new S,this.onDidRemoveView=this._onDidRemoveView.event,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.resize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.views.map((function(e){return e.size})),o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.NEGATIVE_INFINITY,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.POSITIVE_INFINITY,s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,c=i;if(e<0||e>i.views.length)return 0;var f=re(e,-1),h=re(e+1,i.views.length);if(r){var p=!0,d=!1,v=void 0;try{for(var m,y=r[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value;ie(f,b),ie(h,b)}}catch(Q){d=!0,v=Q}finally{try{p||null==y.return||y.return()}finally{if(d)throw v}}}if(o){var g=!0,w=!1,_=void 0;try{for(var S,k=o[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var O=S.value;oe(f,O),oe(h,O)}}catch(Q){w=!0,_=Q}finally{try{g||null==k.return||k.return()}finally{if(w)throw _}}}var C=f.map((function(e){return c.views[e]})),D=f.map((function(e){return n[e]})),P=h.map((function(e){return c.views[e]})),E=h.map((function(e){return n[e]})),A=f.reduce((function(e,t){return e+c.views[t].minimumSize-n[t]}),0),z=f.reduce((function(e,t){return e+c.views[t].maximumSize-n[t]}),0),x=0===h.length?Number.POSITIVE_INFINITY:h.reduce((function(e,t){return e+n[t]-c.views[t].minimumSize}),0),R=0===h.length?Number.NEGATIVE_INFINITY:h.reduce((function(e,t){return e+n[t]-c.views[t].maximumSize}),0),I=Math.max(A,R),j=Math.min(x,z),T=!1;if(s){var N=i.views[s.index],V=t>=s.limitDelta;T=V!==N.visible,N.setVisible(V,s.size)}if(!T&&l){var L=i.views[l.index],G=t<l.limitDelta;T=G!==L.visible,L.setVisible(G,l.size)}if(T)return i.resize(e,t,n,o,r,a,u);for(var H=q(t,I,j),M=0,B=H,F=0;F<C.length;F++){var W=C[F],J=q(D[F]+B,W.minimumSize,W.maximumSize),U=J-D[F];M+=U,B-=U,W.size=J}for(var Z=M,X=0;X<P.length;X++){var $=P[X],Y=q(E[X]-Z,$.minimumSize,$.maximumSize),K=Y-E[X];Z+=K,$.size=Y}return t},this._orientation=n.orientation,this.element=this.createContainer(),this.proportionalLayout=void 0===n.proportionalLayout||!!n.proportionalLayout,this.viewContainer=this.createViewContainer(),this.sashContainer=this.createSashContainer(),this.element.appendChild(this.sashContainer),this.element.appendChild(this.viewContainer),this.container.appendChild(this.element),this.style(n.styles),n.descriptor){var o=this;this._size=n.descriptor.size,n.descriptor.views.forEach((function(e,t){var n=void 0===e.visible||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},i=e.view;o.addView(i,n,t,!0)})),this.contentSize=this.views.reduce((function(e,t){return e+t.size}),0),this.saveProportions()}}var t,n,i;return t=e,n=[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"orthogonalSize",get:function(){return this._orthogonalSize},set:function(e){this._orthogonalSize=e}},{key:"length",get:function(){return this.views.length}},{key:"proportions",get:function(){return this._proportions?_e(this._proportions):void 0}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e;var t=this.size;this.size=this.orthogonalSize,this.orthogonalSize=t,U(this.element,"horizontal","vertical"),this.element.classList.add(this.orientation==le.HORIZONTAL?"horizontal":"vertical")}},{key:"minimumSize",get:function(){return this.views.reduce((function(e,t){return e+t.minimumSize}),0)}},{key:"maximumSize",get:function(){return 0===this.length?Number.POSITIVE_INFINITY:this.views.reduce((function(e,t){return e+t.maximumSize}),0)}},{key:"startSnappingEnabled",get:function(){return this._startSnappingEnabled},set:function(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}},{key:"endSnappingEnabled",get:function(){return this._endSnappingEnabled},set:function(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}},{key:"style",value:function(e){"transparent"===(null===e||void 0===e?void 0:e.separatorBorder)?(U(this.element,"separator-border"),this.element.style.removeProperty("--dv-separator-border")):(Z(this.element,"separator-border"),(null===e||void 0===e?void 0:e.separatorBorder)&&this.element.style.setProperty("--dv-separator-border",e.separatorBorder))}},{key:"isViewVisible",value:function(e){if(e<0||e>=this.views.length)throw new Error("Index out of bounds");return this.views[e].visible}},{key:"setViewVisible",value:function(e,t){if(e<0||e>=this.views.length)throw new Error("Index out of bounds");X(this.container,"visible",t);var n=this.views[e];X(this.container,"visible",t),n.setVisible(t,n.size),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}},{key:"getViewSize",value:function(e){return e<0||e>=this.views.length?-1:this.views[e].size}},{key:"resizeView",value:function(e,t){var n=this;if(!(e<0||e>=this.views.length)){var i=re(this.views.length).filter((function(t){return t!==e})),o=_e(i.filter((function(e){return n.views[e].priority===pe.Low}))).concat([e]),r=i.filter((function(e){return n.views[e].priority===pe.High})),a=this.views[e];t=Math.round(t),t=q(t,a.minimumSize,Math.min(a.maximumSize,this._size)),a.size=t,this.relayout(o,r)}}},{key:"getViews",value:function(){return this.views.map((function(e){return e.view}))}},{key:"onDidChange",value:function(e,t){var n=this.views.indexOf(e);n<0||n>=this.views.length||(t="number"===typeof t?t:e.size,t=q(t,e.minimumSize,e.maximumSize),e.size=t,this.relayout([n]))}},{key:"addView",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"distribute"},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.views.length,o=arguments.length>3?arguments[3]:void 0,r=this,a=document.createElement("div");a.className="view",a.appendChild(e.element),t="number"===typeof n?n:"split"===n.type?this.getViewSize(n.index)/2:"invisible"===n.type?{cachedVisibleSize:n.cachedVisibleSize}:e.minimumSize;var u=e.onDidChange((function(e){return r.onDidChange(l,e)})),s=function(){null===u||void 0===u||u.dispose(),r.viewContainer.removeChild(a)},l=new ye(a,e,t,{dispose:s});if(i===this.views.length?this.viewContainer.appendChild(a):this.viewContainer.insertBefore(a,this.viewContainer.children.item(i)),this.views.splice(i,0,l),this.views.length>1){var c=this,f=document.createElement("div");f.className="sash";var h=function(e){var t=c,n=!0,i=!1,o=void 0;try{for(var r,a=c.views[Symbol.iterator]();!(n=(r=a.next()).done);n=!0)r.value.enabled=!1}catch(N){i=!0,o=N}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}var u=_e(Y("iframe")).concat(_e(Y("webview"))),s=!0,l=!1,h=void 0;try{for(var p,d=u[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)p.value.style.pointerEvents="none"}catch(V){l=!0,h=V}finally{try{s||null==d.return||d.return()}finally{if(l)throw h}}var v,m,y=c._orientation===le.HORIZONTAL?e.clientX:e.clientY,b=ae(c.sashes,(function(e){return e.container===f})),g=c.views.map((function(e){return e.size})),w=re(b,-1),_=re(b+1,c.views.length),S=w.reduce((function(e,n){return e+(t.views[n].minimumSize-g[n])}),0),k=w.reduce((function(e,n){return e+(t.views[n].viewMaximumSize-g[n])}),0),O=0===_.length?Number.POSITIVE_INFINITY:_.reduce((function(e,n){return e+(g[n]-t.views[n].minimumSize)}),0),C=0===_.length?Number.NEGATIVE_INFINITY:_.reduce((function(e,n){return e+(g[n]-t.views[n].viewMaximumSize)}),0),D=Math.max(S,C),P=Math.min(O,k),E=c.findFirstSnapIndex(w),A=c.findFirstSnapIndex(_);if("number"===typeof E){var z=c.views[E],x=Math.floor(z.viewMinimumSize/2);v={index:E,limitDelta:z.visible?D-x:D+x,size:z.size}}if("number"===typeof A){var R=c.views[A],I=Math.floor(R.viewMinimumSize/2);m={index:A,limitDelta:R.visible?P+I:P-I,size:R.size}}var j=function(e){var n=(t._orientation===le.HORIZONTAL?e.clientX:e.clientY)-y;t.resize(b,n,g,void 0,void 0,D,P,v,m),t.distributeEmptySpace(),t.layoutViews()},T=function(){var e=!0,n=!1,i=void 0;try{for(var o,r=t.views[Symbol.iterator]();!(e=(o=r.next()).done);e=!0)o.value.enabled=!0}catch(h){n=!0,i=h}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}var a=!0,s=!1,l=void 0;try{for(var c,f=u[Symbol.iterator]();!(a=(c=f.next()).done);a=!0)c.value.style.pointerEvents="auto"}catch(p){s=!0,l=p}finally{try{a||null==f.return||f.return()}finally{if(s)throw l}}t.saveProportions(),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",T),document.removeEventListener("mouseend",T),t._onDidSashEnd.fire(void 0)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",T),document.addEventListener("mouseend",T)};f.addEventListener("mousedown",h);var p={container:f,disposable:function(){f.removeEventListener("mousedown",h),c.sashContainer.removeChild(f)}};this.sashContainer.appendChild(f),this.sashes.push(p)}o||this.relayout([i]),o||"number"===typeof n||"distribute"!==n.type||this.distributeViewSizes(),this._onDidAddView.fire(e)}},{key:"distributeViewSizes",value:function(){var e=this,t=[],n=0,i=!0,o=!1,r=void 0;try{for(var a,u=this.views[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value;s.maximumSize-s.minimumSize>0&&(t.push(s),n+=s.size)}}catch(g){o=!0,r=g}finally{try{i||null==u.return||u.return()}finally{if(o)throw r}}var l=Math.floor(n/t.length),c=!0,f=!1,h=void 0;try{for(var p,d=t[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;v.size=q(l,v.minimumSize,v.maximumSize)}}catch(w){f=!0,h=w}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}var m=re(this.views.length),y=m.filter((function(t){return e.views[t].priority===pe.Low})),b=m.filter((function(t){return e.views[t].priority===pe.High}));this.relayout(y,b)}},{key:"removeView",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.views.splice(e,1)[0];if(i.dispose(),this.views.length>=1){var o=Math.max(e-1,0),r=this.sashes.splice(o,1)[0];r.disposable()}return n||this.relayout(),t&&"distribute"===t.type&&this.distributeViewSizes(),this._onDidRemoveView.fire(i.view),i.view}},{key:"getViewCachedVisibleSize",value:function(e){if(e<0||e>=this.views.length)throw new Error("Index out of bounds");return this.views[e].cachedVisibleSize}},{key:"moveView",value:function(e,t){var n=this.getViewCachedVisibleSize(e),i="undefined"===typeof n?this.getViewSize(e):ve.Invisible(n),o=this.removeView(e,void 0,!0);this.addView(o,i,t)}},{key:"layout",value:function(e,t){var n=Math.max(this.size,this.contentSize);if(this.size=e,this.orthogonalSize=t,this.proportions)for(var i=0;i<this.views.length;i++){var o=this.views[i];o.size=q(Math.round(this.proportions[i]*e),o.minimumSize,o.maximumSize)}else{var r=this,a=re(this.views.length),u=a.filter((function(e){return r.views[e].priority===pe.Low})),s=a.filter((function(e){return r.views[e].priority===pe.High}));this.resize(this.views.length-1,e-n,void 0,u,s)}this.distributeEmptySpace(),this.layoutViews()}},{key:"relayout",value:function(e,t){var n=this.views.reduce((function(e,t){return e+t.size}),0);this.resize(this.views.length-1,this._size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}},{key:"distributeEmptySpace",value:function(e){var t=this,n=this.views.reduce((function(e,t){return e+t.size}),0),i=this.size-n,o=re(this.views.length-1,-1),r=o.filter((function(e){return t.views[e].priority===pe.Low})),a=o.filter((function(e){return t.views[e].priority===pe.High})),u=!0,s=!1,l=void 0;try{for(var c,f=a[Symbol.iterator]();!(u=(c=f.next()).done);u=!0)ie(o,c.value)}catch(w){s=!0,l=w}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}var h=!0,p=!1,d=void 0;try{for(var v,m=r[Symbol.iterator]();!(h=(v=m.next()).done);h=!0)oe(o,v.value)}catch(_){p=!0,d=_}finally{try{h||null==m.return||m.return()}finally{if(p)throw d}}"number"===typeof e&&oe(o,e);for(var y=0;0!==i&&y<o.length;y++){var b=this.views[o[y]],g=q(b.size+i,b.minimumSize,b.maximumSize);i-=g-b.size,b.size=g}}},{key:"saveProportions",value:function(){if(this.proportionalLayout&&this.contentSize>0){var e=this;this._proportions=this.views.map((function(t){return t.size/e.contentSize}))}}},{key:"layoutViews",value:function(){var e=this;this.contentSize=this.views.reduce((function(e,t){return e+t.size}),0);var t=0,n=[];this.updateSashEnablement();for(var i=0;i<this.views.length-1;i++){t+=this.views[i].size,n.push(t);var o=Math.min(Math.max(0,t-2),this.size-4);this._orientation===le.HORIZONTAL&&(this.sashes[i].container.style.left="".concat(o,"px"),this.sashes[i].container.style.top="0px"),this._orientation===le.VERTICAL&&(this.sashes[i].container.style.left="0px",this.sashes[i].container.style.top="".concat(o,"px"))}this.views.forEach((function(t,i){e._orientation===le.HORIZONTAL&&(t.container.style.width="".concat(t.size,"px"),t.container.style.left=0==i?"0px":"".concat(n[i-1],"px"),t.container.style.top="",t.container.style.height=""),e._orientation===le.VERTICAL&&(t.container.style.height="".concat(t.size,"px"),t.container.style.top=0==i?"0px":"".concat(n[i-1],"px"),t.container.style.width="",t.container.style.left=""),t.view.layout(t.size,e._orthogonalSize)}))}},{key:"findFirstSnapIndex",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,u=this.views[a];if(u.visible&&u.snap)return a}}catch(v){n=!0,i=v}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}var s=!0,l=!1,c=void 0;try{for(var f,h=e[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,d=this.views[p];if(d.visible&&d.maximumSize-d.minimumSize>0)return;if(!d.visible&&d.snap)return p}}catch(m){l=!0,c=m}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}},{key:"updateSashEnablement",value:function(){var e=!1,t=this.views.map((function(t){return e=t.size-t.minimumSize>0||e}));e=!1;var n=this.views.map((function(t){return e=t.maximumSize-t.size>0||e})),i=_e(this.views).reverse();e=!1;var o=i.map((function(t){return e=t.size-t.minimumSize>0||e})).reverse();e=!1;for(var r=i.map((function(t){return e=t.maximumSize-t.size>0||e})).reverse(),a=0,u=0;u<this.sashes.length;u++){var s=this.sashes[u];a+=this.views[u].size;var l=!(t[u]&&r[u+1]),c=!(n[u]&&o[u+1]);if(l&&c){var f=re(u,-1),h=re(u+1,this.views.length),p=this.findFirstSnapIndex(f),d=this.findFirstSnapIndex(h),v="number"===typeof p&&!this.views[p].visible,m="number"===typeof d&&!this.views[d].visible;v&&o[u]&&(a>0||this.startSnappingEnabled)?this.updateSash(s,fe.MINIMUM):m&&t[u]&&(a<this.contentSize||this.endSnappingEnabled)?this.updateSash(s,fe.MAXIMUM):this.updateSash(s,fe.DISABLED)}else l&&!c?this.updateSash(s,fe.MINIMUM):!l&&c?this.updateSash(s,fe.MAXIMUM):this.updateSash(s,fe.ENABLED)}}},{key:"updateSash",value:function(e,t){X(e.container,"disabled",t===fe.DISABLED),X(e.container,"enabled",t===fe.ENABLED),X(e.container,"maximum",t===fe.MAXIMUM),X(e.container,"minimum",t===fe.MINIMUM)}},{key:"createViewContainer",value:function(){var e=document.createElement("div");return e.className="view-container",e}},{key:"createSashContainer",value:function(){var e=document.createElement("div");return e.className="sash-container",e}},{key:"createContainer",value:function(){var e=document.createElement("div"),t=this._orientation===le.HORIZONTAL?"horizontal":"vertical";return e.className="split-view-container ".concat(t),e}},{key:"dispose",value:function(){this._onDidSashEnd.dispose(),this._onDidAddView.dispose(),this._onDidRemoveView.dispose();for(var e=0;e<this.element.children.length;e++)if(this.element.children.item(e)===this.element){this.element.removeChild(this.element);break}this.element.remove()}}],n&&we(t.prototype,n),i&&we(t,i),e}();function ke(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ce(e,t,n){return(Ce="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=De(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return!t||"object"!==Ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=De(e);if(t){var o=De(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Pe(this,n)}}var xe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(r,e);var t,n,i,o=ze(r);function r(e,t){var n,i;return ke(this,r),(n=o.call(this)).paneItems=[],n.skipAnimation=!1,n._onDidChange=new S,n.onDidChange=n._onDidChange.event,n._orientation=null!==(i=t.orientation)&&void 0!==i?i:le.VERTICAL,n.element=document.createElement("div"),n.element.className="pane-container",e.appendChild(n.element),n.splitview=new Se(n.element,{orientation:n._orientation,proportionalLayout:!1,descriptor:t.descriptor}),n.getPanes().forEach((function(e){var t=new T(e.onDidChangeExpansionState((function(){n.setupAnimation(),n._onDidChange.fire(void 0)}))),i={pane:e,disposable:{dispose:function(){t.dispose()}}};n.paneItems.push(i),e.orthogonalSize=n.splitview.orthogonalSize})),n.addDisposables(n._onDidChange,n.splitview.onDidSashEnd((function(){n._onDidChange.fire(void 0)})),n.splitview.onDidAddView((function(){n._onDidChange.fire()})),n.splitview.onDidRemoveView((function(){n._onDidChange.fire()}))),n}return t=r,n=[{key:"onDidAddView",get:function(){return this.splitview.onDidAddView}},{key:"onDidRemoveView",get:function(){return this.splitview.onDidRemoveView}},{key:"minimumSize",get:function(){return this.splitview.minimumSize}},{key:"maximumSize",get:function(){return this.splitview.maximumSize}},{key:"orientation",get:function(){return this.splitview.orientation}},{key:"size",get:function(){return this.splitview.size}},{key:"orthogonalSize",get:function(){return this.splitview.orthogonalSize}},{key:"addPane",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.splitview.length,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,r=e.onDidChangeExpansionState((function(){o.setupAnimation(),o._onDidChange.fire(void 0)})),a={pane:e,disposable:{dispose:function(){r.dispose()}}};this.paneItems.splice(n,0,a),e.orthogonalSize=this.splitview.orthogonalSize,this.splitview.addView(e,t,n,i)}},{key:"getViewSize",value:function(e){return this.splitview.getViewSize(e)}},{key:"getPanes",value:function(){return this.splitview.getViews()}},{key:"removePane",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipDispose:!1},n=this.paneItems.splice(e,1)[0];return this.splitview.removeView(e),t.skipDispose||(n.disposable.dispose(),n.pane.dispose()),n}},{key:"moveView",value:function(e,t){if(e!==t){var n=this.removePane(e,{skipDispose:!0});this.skipAnimation=!0;try{this.addPane(n.pane,n.pane.size,t,!1)}finally{this.skipAnimation=!1}}}},{key:"layout",value:function(e,t){this.splitview.layout(e,t)}},{key:"setupAnimation",value:function(){var e=this;this.skipAnimation||(this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=void 0),Z(this.element,"animated"),this.animationTimer=setTimeout((function(){e.animationTimer=void 0,U(e.element,"animated")}),200))}},{key:"dispose",value:function(){Ce(De(r.prototype),"dispose",this).call(this),this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=void 0),this.paneItems.forEach((function(e){e.disposable.dispose(),e.pane.dispose()})),this.paneItems=[],this.splitview.dispose(),this.element.remove()}}],n&&Oe(t.prototype,n),i&&Oe(t,i),r}(T);function Re(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return!t||"object"!==Ve(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=je(e);if(t){var o=je(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Te(this,n)}}var Ge=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(r,e);var t,n,i,o=Le(r);function r(e,t){var n;return Re(this,r),(n=o.call(this)).element=e,n.callbacks=t,n.counter=0,n.registerListeners(),n}return t=r,(n=[{key:"registerListeners",value:function(){var e=this;this.addDisposables(O(this.element,"dragenter",(function(t){e.counter++,e.callbacks.onDragEnter(t)}))),this.addDisposables(O(this.element,"dragover",(function(t){t.preventDefault(),e.callbacks.onDragOver&&e.callbacks.onDragOver(t)}))),this.addDisposables(O(this.element,"dragleave",(function(t){e.counter--,0===e.counter&&e.callbacks.onDragLeave(t)}))),this.addDisposables(O(this.element,"dragend",(function(t){e.counter=0,e.callbacks.onDragEnd(t)}))),this.addDisposables(O(this.element,"drop",(function(t){e.counter=0,e.callbacks.onDrop(t)})))}}])&&Ie(t.prototype,n),i&&Ie(t,i),r}(T);function He(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return!t||"object"!==Ze(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je,Ue,Ze=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Be(e);if(t){var o=Be(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Fe(this,n)}}(Ue=Je||(Je={})).Top="Top",Ue.Left="Left",Ue.Bottom="Bottom",Ue.Right="Right",Ue.Center="Center";var $e=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(r,e);var t,n,i,o=Xe(r);function r(e,t){var n;return He(this,r),(n=o.call(this)).element=e,n.options=t,n._onDrop=new S,n.onDrop=n._onDrop.event,n.addDisposables(n._onDrop,new Ge(n.element,{onDragEnter:function(){},onDragOver:function(e){var t=n.element.clientWidth,i=n.element.clientHeight;if(0!==t&&0!==i){var o=100*e.offsetX/t,r=100*e.offsetY/i,a=n.calculateQuadrant(n.options.validOverlays,o,r);if("boolean"===typeof n.options.canDisplayOverlay){if(!n.options.canDisplayOverlay)return}else if(!n.options.canDisplayOverlay(e,a))return;if(n.target||(n.target=document.createElement("div"),n.target.className="drop-target-dropzone",n.overlay=document.createElement("div"),n.overlay.className="drop-target-selection",n._state=Je.Center,n.target.appendChild(n.overlay),n.element.classList.add("drop-target"),n.element.append(n.target)),"none"!==n.options.validOverlays&&n.target&&n.overlay){var u=t<100,s=i<100;n.toggleClasses(a,u,s),n.setState(a)}}},onDragLeave:function(){n.removeDropTarget()},onDragEnd:function(){n.removeDropTarget()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=n._state;n.removeDropTarget(),t&&n._onDrop.fire({position:t,nativeEvent:e})}})),n}return t=r,(n=[{key:"state",get:function(){return this._state}},{key:"validOverlays",set:function(e){this.options.validOverlays=e}},{key:"canDisplayOverlay",set:function(e){this.options.canDisplayOverlay=e}},{key:"dispose",value:function(){this.removeDropTarget()}},{key:"toggleClasses",value:function(e,t,n){if(this.overlay){var i="left"===e,o="right"===e,r="top"===e,a="bottom"===e;X(this.overlay,"right",!t&&o),X(this.overlay,"left",!t&&i),X(this.overlay,"top",!n&&r),X(this.overlay,"bottom",!n&&a),X(this.overlay,"small-right",t&&o),X(this.overlay,"small-left",t&&i),X(this.overlay,"small-top",n&&r),X(this.overlay,"small-bottom",n&&a)}}},{key:"setState",value:function(e){switch(e){case"top":this._state=Je.Top;break;case"left":this._state=Je.Left;break;case"bottom":this._state=Je.Bottom;break;case"right":this._state=Je.Right;break;default:this._state=Je.Center}}},{key:"calculateQuadrant",value:function(e,t,n){switch(e){case"all":if(t<20)return"left";if(t>80)return"right";if(n<20)return"top";if(n>80)return"bottom";break;case"vertical":return n<50?"top":"bottom";case"horizontal":return t<50?"left":"right"}return null}},{key:"removeDropTarget",value:function(){this.target&&(this._state=void 0,this.element.removeChild(this.target),this.target=void 0,this.element.classList.remove("drop-target"))}}])&&Me(t.prototype,n),i&&Me(t,i),r}(T);function Ye(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qe=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this;Ye(this,e),this.view=t,this.orientation=n,this._onDidChange=new S,this.onDidChange=this._onDidChange.event,this._orthogonalSize=i,this._size=o,this._disposable=this.view.onDidChange((function(e){e?r._onDidChange.fire(r.orientation===le.VERTICAL?e.width:e.height):r._onDidChange.fire(void 0)}))}var t,n,i;return t=e,(n=[{key:"minimumWidth",get:function(){return this.view.minimumWidth}},{key:"maximumWidth",get:function(){return this.view.maximumWidth}},{key:"minimumHeight",get:function(){return this.view.minimumHeight}},{key:"maximumHeight",get:function(){return this.view.maximumHeight}},{key:"priority",get:function(){return this.view.priority}},{key:"snap",get:function(){return this.view.snap}},{key:"minimumSize",get:function(){return this.orientation===le.HORIZONTAL?this.minimumHeight:this.minimumWidth}},{key:"maximumSize",get:function(){return this.orientation===le.HORIZONTAL?this.maximumHeight:this.maximumWidth}},{key:"minimumOrthogonalSize",get:function(){return this.orientation===le.HORIZONTAL?this.minimumWidth:this.minimumHeight}},{key:"maximumOrthogonalSize",get:function(){return this.orientation===le.HORIZONTAL?this.maximumWidth:this.maximumHeight}},{key:"orthogonalSize",get:function(){return this._orthogonalSize}},{key:"size",get:function(){return this._size}},{key:"element",get:function(){return this.view.element}},{key:"width",get:function(){return this.orientation===le.HORIZONTAL?this.orthogonalSize:this.size}},{key:"height",get:function(){return this.orientation===le.HORIZONTAL?this.size:this.orthogonalSize}},{key:"setVisible",value:function(e){this.view.setVisible&&(this.view.setVisible(e),this._onDidChange.fire(void 0))}},{key:"layout",value:function(e,t){this._size=e,this._orthogonalSize=t,this.view.layout(this.width,this.height)}},{key:"dispose",value:function(){this._onDidChange.dispose(),this._disposable.dispose()}}])&&Ke(t.prototype,n),i&&Ke(t,i),e}();function qe(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nt(e,t,n){return(nt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=it(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return!t||"object"!==st(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var st=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function lt(e,t){if(e){if("string"===typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=it(e);if(t){var o=it(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ot(this,n)}}var ft=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(r,e);var t,n,i,o=ct(r);function r(e,t,n,i,a,u){var s;if(function(e,t){if(!qe(e,t))throw new TypeError("Cannot call a class as a function")}(this,r),(s=o.call(this)).orientation=e,s.proportionalLayout=t,s.styles=n,s.children=[],s._onDidChange=new S,s.onDidChange=s._onDidChange.event,s._childrenDisposable=C.NONE,s._orthogonalSize=a,s._size=i,s.element=document.createElement("div"),s.element.className="branch-node",u){var l={views:u.map((function(e){return{view:e.node,size:e.node.size,visible:(t=e.node,n=Qe,!(null!=n&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):qe(t,n))||void 0===e.visible||e.visible)};var t,n})),size:s.size};s.children=u.map((function(e){return e.node})),s.splitview=new Se(s.element,{orientation:s.orientation,descriptor:l,proportionalLayout:t})}else s.splitview=new Se(s.element,{orientation:s.orientation,proportionalLayout:t,styles:n}),s.splitview.layout(s.size,s.orthogonalSize);return s.addDisposables(s._onDidChange,s.splitview.onDidSashEnd((function(){s._onDidChange.fire(void 0)}))),s.setupChildrenEvents(),s}return t=r,(n=[{key:"width",get:function(){return this.orientation===le.HORIZONTAL?this.size:this.orthogonalSize}},{key:"height",get:function(){return this.orientation===le.HORIZONTAL?this.orthogonalSize:this.size}},{key:"minimumSize",get:function(){var e;return 0===this.children.length?0:(e=Math).max.apply(e,ut(this.children.map((function(e){return e.minimumOrthogonalSize}))))}},{key:"maximumSize",get:function(){var e;return(e=Math).min.apply(e,ut(this.children.map((function(e){return e.maximumOrthogonalSize}))))}},{key:"minimumOrthogonalSize",get:function(){return this.splitview.minimumSize}},{key:"maximumOrthogonalSize",get:function(){return this.splitview.maximumSize}},{key:"orthogonalSize",get:function(){return this._orthogonalSize}},{key:"size",get:function(){return this._size}},{key:"minimumWidth",get:function(){return this.orientation===le.HORIZONTAL?this.minimumOrthogonalSize:this.minimumSize}},{key:"minimumHeight",get:function(){return this.orientation===le.HORIZONTAL?this.minimumSize:this.minimumOrthogonalSize}},{key:"maximumWidth",get:function(){return this.orientation===le.HORIZONTAL?this.maximumOrthogonalSize:this.maximumSize}},{key:"maximumHeight",get:function(){return this.orientation===le.HORIZONTAL?this.maximumSize:this.maximumOrthogonalSize}},{key:"priority",get:function(){if(0===this.children.length)return pe.Normal;var e=this.children.map((function(e){return"undefined"===typeof e.priority?pe.Normal:e.priority}));return e.some((function(e){return e===pe.High}))?pe.High:e.some((function(e){return e===pe.Low}))?pe.Low:pe.Normal}},{key:"setVisible",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this.children[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)o.value.setVisible(e)}catch(a){n=!0,i=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}},{key:"isChildVisible",value:function(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.isViewVisible(e)}},{key:"setChildVisible",value:function(e,t){if(e<0||e>=this.children.length)throw new Error("Invalid index");this.splitview.isViewVisible(e)!==t&&this.splitview.setViewVisible(e,t)}},{key:"moveChild",value:function(e,t){if(e!==t){if(e<0||e>=this.children.length)throw new Error("Invalid from index");e<t&&t--,this.splitview.moveView(e,t);var n=this._removeChild(e);this._addChild(n,t)}}},{key:"getChildSize",value:function(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewSize(e)}},{key:"resizeChild",value:function(e,t){if(e<0||e>=this.children.length)throw new Error("Invalid index");this.splitview.resizeView(e,t)}},{key:"layout",value:function(e,t){this._size=t,this._orthogonalSize=e,this.splitview.layout(this.size,this.orthogonalSize)}},{key:"addChild",value:function(e,t,n,i){if(n<0||n>this.children.length)throw new Error("Invalid index");this.splitview.addView(e,t,n,i),this._addChild(e,n)}},{key:"getChildCachedVisibleSize",value:function(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewCachedVisibleSize(e)}},{key:"removeChild",value:function(e,t){if(e<0||e>=this.children.length)throw new Error("Invalid index");this.splitview.removeView(e,t),this._removeChild(e)}},{key:"_addChild",value:function(e,t){this.children.splice(t,0,e),this.setupChildrenEvents()}},{key:"_removeChild",value:function(e){var t=at(this.children.splice(e,1),1)[0];return this.setupChildrenEvents(),t}},{key:"setupChildrenEvents",value:function(){var e,t=this;this._childrenDisposable.dispose(),this._childrenDisposable=(e=h).any.apply(e,ut(this.children.map((function(e){return e.onDidChange}))))((function(){t._onDidChange.fire(void 0)}))}},{key:"dispose",value:function(){nt(it(r.prototype),"dispose",this).call(this),this._childrenDisposable.dispose(),this.children.forEach((function(e){return e.dispose()})),this.splitview.dispose()}}])&&tt(t.prototype,n),i&&tt(t,i),r}(T);function ht(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function dt(e){if(Array.isArray(e))return e}function vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mt(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):ht(e,t)}function yt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function bt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gt(e,t){return dt(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||St(e,t)||bt()}function wt(e){return dt(e)||yt(e)||St(e,i)||bt()}function _t(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||yt(e)||St(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"===typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(e,t):void 0}}function kt(e,t){if(mt(e,Qe))return e;if(mt(e,ft))return kt(e.children[t?e.children.length-1:0],t);throw new Error("invalid node")}function Ot(e,t,n){if(mt(e,ft)){for(var i=new ft(Pt(e.orientation),e.proportionalLayout,e.styles,t,n),o=0,r=e.children.length-1;r>=0;r--){var a=e.children[r],u=mt(a,ft)?a.orthogonalSize:a.size,s=0===e.size?0:Math.round(t*u/e.size);o+=s,0===r&&(s+=t-o),i.addChild(Ot(a,n,s),s,0,!0)}return i}return new Qe(e.view,Pt(e.orientation),n)}function Ct(e){var t=e.parentElement;if(!t)throw new Error("Invalid grid element");if(/\bgrid-view\b/.test(t.className))return[];var n=function(e){var t=e.parentElement;if(!t)throw new Error("Invalid grid element");for(var n=t.firstElementChild,i=0;n!==e&&n!==t.lastElementChild&&n;)n=n.nextElementSibling,i++;return i}(t);return _t(Ct(t.parentElement.parentElement.parentElement)).concat([n])}function Dt(e,t,n){var i=function(e,t){return t.length%2===0?Pt(e):e}(e,t),o=function(e){return e===Je.Top||e===Je.Bottom?le.VERTICAL:le.HORIZONTAL}(n);if(i===o){var r=gt(te(t),2),a=r[0],u=r[1];return n!==Je.Right&&n!==Je.Bottom||(u+=1),_t(a).concat([u])}var s=n===Je.Right||n===Je.Bottom?1:0;return _t(t).concat([s])}var Pt=function(e){return e===le.HORIZONTAL?le.VERTICAL:le.HORIZONTAL};var Et=function(e,t){var n=t===le.VERTICAL?e.box.width:e.box.height;return function(e){return!!e.children}(e)?{type:"branch",data:e.children.map((function(e){return Et(e,Pt(t))})),size:n}:"number"===typeof e.cachedVisibleSize?{type:"leaf",data:e.view.toJSON(),size:e.cachedVisibleSize,visible:!1}:{type:"leaf",data:e.view.toJSON(),size:n}},At=function(){function e(t,n,i){!function(e,t){if(!ht(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),this.proportionalLayout=t,this.styles=n,this.disposable=new N,this._onDidChange=new S,this.onDidChange=this._onDidChange.event,this.element=document.createElement("div"),this.element.className="grid-view",this.root=new ft(i,t,n,0,0)}var t,n,i;return t=e,n=[{key:"serialize",value:function(){return{root:Et(this.getView(),this.orientation),width:this.width,height:this.height,orientation:this.orientation}}},{key:"dispose",value:function(){this.disposable.dispose(),this._onDidChange.dispose(),this.root.dispose(),this.element.remove()}},{key:"clear",value:function(){var e=this.root.orientation;this.root=new ft(e,this.proportionalLayout,this.styles,this.root.size,this.root.orthogonalSize)}},{key:"deserialize",value:function(e,t){var n=e.orientation,i=n===le.VERTICAL?e.height:e.width;this._deserialize(e.root,n,t,i)}},{key:"_deserialize",value:function(e,t,n,i){this.root=this._deserializeNode(e,t,n,i,!0)}},{key:"_deserializeNode",value:function(e,t,n,i){var o,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("branch"===e.type){var a=this,u=e.data,s=u.map((function(i){return{node:a._deserializeNode(i,Pt(t),n,e.size),visible:i.visible}}));o=new ft(t,this.proportionalLayout,this.styles,r?i:e.size,r?e.size:i,s)}else o=new Qe(n.fromJSON(e),t,i,e.size);return o}},{key:"orientation",get:function(){return this.root.orientation},set:function(e){if(this.root.orientation!==e){var t=this.root,n=t.size,i=t.orthogonalSize;this.root=Ot(this.root,i,n),this.root.layout(n,i)}}},{key:"root",get:function(){return this._root},set:function(e){var t=this,n=this._root;n&&(n.dispose(),this.element.removeChild(n.element)),this._root=e,this.element.appendChild(this._root.element),this.disposable.value=this._root.onDidChange((function(e){t._onDidChange.fire(e)}))}},{key:"next",value:function(e){return this.progmaticSelect(e)}},{key:"previous",value:function(e){return this.progmaticSelect(e,!0)}},{key:"getView",value:function(e){var t=e?this.getNode(e)[1]:this.root;return this._getViews(t,this.orientation)}},{key:"_getViews",value:function(e,t,n){var i={height:e.height,width:e.width};if(mt(e,Qe))return{box:i,view:e.view,cachedVisibleSize:n};for(var o=[],r=0;r<e.children.length;r++){var a=e.children[r],u=e.getChildCachedVisibleSize(r);o.push(this._getViews(a,Pt(t),u))}return{box:i,children:o}}},{key:"progmaticSelect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=gt(this.getNode(e),2),i=n[0],o=n[1];if(!mt(o,Qe))throw new Error("invalid location");for(var r=i.length-1;r>-1;r--){var a=i[r],u=e[r]||0,s=t?u-1>-1:u+1<a.children.length;if(s)return kt(a.children[t?u-1:u+1],t)}return kt(this.root,t)}},{key:"width",get:function(){return this.root.width}},{key:"height",get:function(){return this.root.height}},{key:"minimumWidth",get:function(){return this.root.minimumWidth}},{key:"minimumHeight",get:function(){return this.root.minimumHeight}},{key:"maximumWidth",get:function(){return this.root.maximumHeight}},{key:"maximumHeight",get:function(){return this.root.maximumHeight}},{key:"isViewVisible",value:function(e){var t=gt(te(e),2),n=t[0],i=t[1],o=gt(this.getNode(n),2)[1];if(!mt(o,ft))throw new Error("Invalid from location");return o.isChildVisible(i)}},{key:"setViewVisible",value:function(e,t){var n=gt(te(e),2),i=n[0],o=n[1],r=gt(this.getNode(i),2)[1];if(!mt(r,ft))throw new Error("Invalid from location");r.setChildVisible(o,t)}},{key:"moveView",value:function(e,t,n){var i=gt(this.getNode(e),2)[1];if(!mt(i,ft))throw new Error("Invalid location");i.moveChild(t,n)}},{key:"addView",value:function(e,t,n){var i=gt(te(n),2),o=i[0],r=i[1],a=gt(this.getNode(o),2),u=a[0],s=a[1];if(mt(s,ft)){var l=new Qe(e,Pt(s.orientation),s.orthogonalSize);s.addChild(l,t,r)}else{var c=wt(_t(u).reverse()),f=c[0],h=(c.slice(1),wt(_t(o).reverse())),p=h[0],d=(h.slice(1),0),v=f.getChildCachedVisibleSize(p);"number"===typeof v&&(d=ve.Invisible(v)),f.removeChild(p);var m=new ft(s.orientation,this.proportionalLayout,this.styles,s.size,s.orthogonalSize);f.addChild(m,s.size,p);var y=new Qe(s.view,f.orientation,s.size);m.addChild(y,d,0),"number"!==typeof t&&"split"===t.type&&(t={type:"split",index:0});var b=new Qe(e,f.orientation,s.size);m.addChild(b,t,r)}}},{key:"remove",value:function(e,t){var n=Ct(e.element);return this.removeView(n,t)}},{key:"removeView",value:function(e,t){var n=gt(te(e),2),i=n[0],o=n[1],r=gt(this.getNode(i),2),a=r[0],u=r[1];if(!mt(u,ft))throw new Error("Invalid location");var s=u.children[o];if(!mt(s,Qe))throw new Error("Invalid location");if(u.removeChild(o,t),0===u.children.length)return s.view;if(u.children.length>1)return s.view;var l=u.children[0];if(0===a.length)return mt(l,Qe)||(u.removeChild(0,t),this.root=l),s.view;var c=wt(_t(a).reverse()),f=c[0],h=(c.slice(1),wt(_t(i).reverse())),p=h[0],d=(h.slice(1),u.isChildVisible(0));u.removeChild(0,t);var v=f.children.map((function(e,t){return f.getChildSize(t)}));if(f.removeChild(p,t),mt(l,ft)){var m;(m=v).splice.apply(m,[p,1].concat(_t(l.children.map((function(e){return e.size})))));for(var y=0;y<l.children.length;y++){var b=l.children[y];f.addChild(b,b.size,p+y)}}else{var g=new Qe(l.view,Pt(l.orientation),l.size),w=d?l.orthogonalSize:ve.Invisible(l.orthogonalSize);f.addChild(g,w,p)}for(var _=0;_<v.length;_++)f.resizeChild(_,v[_]);return s.view}},{key:"layout",value:function(e,t){var n=gt(this.root.orientation===le.HORIZONTAL?[t,e]:[e,t],2),i=n[0],o=n[1];this.root.layout(i,o)}},{key:"getNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===e.length)return[n,t];if(!mt(t,ft))throw new Error("Invalid location");var i=wt(e),o=i[0],r=i.slice(1);if(o<0||o>=t.children.length)throw new Error("Invalid location");var a=t.children[o];return n.push(t),this.getNode(r,a,n)}}],n&&vt(t.prototype,n),i&&vt(t,i),e}();function zt(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rt(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),e}var It=function(){function e(t){zt(this,e),this.component=t}return Rt(e,[{key:"minimumSize",get:function(){return this.component.minimumSize}},{key:"maximumSize",get:function(){return this.component.maximumSize}},{key:"height",get:function(){return this.component.height}},{key:"width",get:function(){return this.component.width}},{key:"length",get:function(){return this.component.length}},{key:"orientation",get:function(){return this.component.orientation}},{key:"panels",get:function(){return this.component.panels}},{key:"onDidLayoutFromJSON",get:function(){return this.component.onDidLayoutFromJSON}},{key:"onDidLayoutChange",get:function(){return this.component.onDidLayoutChange}},{key:"onDidAddView",get:function(){return this.component.onDidAddView}},{key:"onDidRemoveView",get:function(){return this.component.onDidRemoveView}},{key:"updateOptions",value:function(e){this.component.updateOptions(e)}},{key:"removePanel",value:function(e,t){this.component.removePanel(e,t)}},{key:"focus",value:function(){this.component.focus()}},{key:"getPanel",value:function(e){return this.component.getPanel(e)}},{key:"layout",value:function(e,t){return this.component.layout(e,t)}},{key:"addPanel",value:function(e){return this.component.addPanel(e)}},{key:"movePanel",value:function(e,t){this.component.movePanel(e,t)}},{key:"fromJSON",value:function(e){this.component.fromJSON(e)}},{key:"toJSON",value:function(){return this.component.toJSON()}}]),e}(),jt=function(){function e(t){zt(this,e),this.component=t}return Rt(e,[{key:"minimumSize",get:function(){return this.component.minimumSize}},{key:"maximumSize",get:function(){return this.component.maximumSize}},{key:"height",get:function(){return this.component.height}},{key:"width",get:function(){return this.component.width}},{key:"panels",get:function(){return this.component.panels}},{key:"onDidLayoutChange",get:function(){return this.component.onDidLayoutChange}},{key:"onDidLayoutFromJSON",get:function(){return this.component.onDidLayoutFromJSON}},{key:"onDidAddView",get:function(){return this.component.onDidAddView}},{key:"onDidRemoveView",get:function(){return this.component.onDidRemoveView}},{key:"onDidDrop",get:function(){var e=this,t=new S,n=this.component.onDidDrop((function(n){t.fire(Object.assign(Object.assign({},n),{api:e}))}));return t.dispose=function(){n.dispose(),t.dispose()},t.event}},{key:"removePanel",value:function(e){this.component.removePanel(e)}},{key:"getPanel",value:function(e){return this.component.getPanel(e)}},{key:"movePanel",value:function(e,t){this.component.movePanel(e,t)}},{key:"focus",value:function(){this.component.focus()}},{key:"layout",value:function(e,t){this.component.layout(e,t)}},{key:"addPanel",value:function(e){return this.component.addPanel(e)}},{key:"fromJSON",value:function(e){this.component.fromJSON(e)}},{key:"toJSON",value:function(){return this.component.toJSON()}}]),e}(),Tt=function(){function e(t){zt(this,e),this.component=t}return Rt(e,[{key:"minimumHeight",get:function(){return this.component.minimumHeight}},{key:"maximumHeight",get:function(){return this.component.maximumHeight}},{key:"minimumWidth",get:function(){return this.component.minimumWidth}},{key:"maximumWidth",get:function(){return this.component.maximumWidth}},{key:"width",get:function(){return this.component.width}},{key:"height",get:function(){return this.component.height}},{key:"onDidLayoutChange",get:function(){return this.component.onDidLayoutChange}},{key:"onDidAddPanel",get:function(){return this.component.onDidAddGroup}},{key:"onDidRemovePanel",get:function(){return this.component.onDidRemoveGroup}},{key:"onDidActivePanelChange",get:function(){return this.component.onDidActiveGroupChange}},{key:"onDidLayoutFromJSON",get:function(){return this.component.onDidLayoutFromJSON}},{key:"panels",get:function(){return this.component.groups}},{key:"orientation",get:function(){return this.component.orientation},set:function(e){this.component.updateOptions({orientation:e})}},{key:"focus",value:function(){this.component.focus()}},{key:"layout",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.component.layout(e,t,n)}},{key:"addPanel",value:function(e){return this.component.addPanel(e)}},{key:"removePanel",value:function(e,t){this.component.removePanel(e,t)}},{key:"movePanel",value:function(e,t){this.component.movePanel(e,t)}},{key:"getPanel",value:function(e){return this.component.getPanel(e)}},{key:"fromJSON",value:function(e){return this.component.fromJSON(e)}},{key:"toJSON",value:function(){return this.component.toJSON()}}]),e}(),Nt=function(){function e(t){zt(this,e),this.component=t}return Rt(e,[{key:"width",get:function(){return this.component.width}},{key:"height",get:function(){return this.component.height}},{key:"minimumHeight",get:function(){return this.component.minimumHeight}},{key:"maximumHeight",get:function(){return this.component.maximumHeight}},{key:"minimumWidth",get:function(){return this.component.minimumWidth}},{key:"maximumWidth",get:function(){return this.component.maximumWidth}},{key:"size",get:function(){return this.component.size}},{key:"totalPanels",get:function(){return this.component.totalPanels}},{key:"onDidActiveGroupChange",get:function(){return this.component.onDidActiveGroupChange}},{key:"onDidAddGroup",get:function(){return this.component.onDidAddGroup}},{key:"onDidRemoveGroup",get:function(){return this.component.onDidRemoveGroup}},{key:"onDidActivePanelChange",get:function(){return this.component.onDidActivePanelChange}},{key:"onDidAddPanel",get:function(){return this.component.onDidAddPanel}},{key:"onDidRemovePanel",get:function(){return this.component.onDidRemovePanel}},{key:"onDidLayoutFromJSON",get:function(){return this.component.onDidLayoutfromJSON}},{key:"onDidLayoutChange",get:function(){return this.component.onDidLayoutChange}},{key:"onDidDrop",get:function(){return this.component.onDidDrop}},{key:"panels",get:function(){return this.component.panels}},{key:"groups",get:function(){return this.component.groups}},{key:"activePanel",get:function(){return this.component.activePanel}},{key:"activeGroup",get:function(){return this.component.activeGroup}},{key:"getTabHeight",value:function(){return this.component.tabHeight}},{key:"setTabHeight",value:function(e){this.component.tabHeight=e}},{key:"focus",value:function(){this.component.focus()}},{key:"getPanel",value:function(e){return this.component.getGroupPanel(e)}},{key:"layout",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.component.layout(e,t,n)}},{key:"addPanel",value:function(e){return this.component.addPanel(e)}},{key:"addEmptyGroup",value:function(e){this.component.addEmptyGroup(e)}},{key:"moveToNext",value:function(e){this.component.moveToNext(e)}},{key:"moveToPrevious",value:function(e){this.component.moveToPrevious(e)}},{key:"closeAllGroups",value:function(){return this.component.closeAllGroups()}},{key:"removeGroup",value:function(e){this.component.removeGroup(e)}},{key:"getGroup",value:function(e){return this.component.getPanel(e)}},{key:"fromJSON",value:function(e){this.component.fromJSON(e)}},{key:"toJSON",value:function(){return this.component.toJSON()}}]),e}();function Vt(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Lt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gt(e,t,n){return(Gt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ht(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){return!t||"object"!==Ft(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ft=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ht(e);if(t){var o=Ht(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Mt(this,n)}}var Jt,Ut,Zt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(r,e);var t,n,i,o=Wt(r);function r(){var e;return Vt(this,r),(e=o.call(this)).disposable=new N,e._onDidFocus=new S,e.onDidFocus=e._onDidFocus.event,e._onDidBlur=new S,e.onDidBlur=e._onDidBlur.event,e._element=document.createElement("div"),e._element.className="content-container",e._element.tabIndex=-1,e.addDisposables(e._onDidFocus,e._onDidBlur),e}return t=r,(n=[{key:"element",get:function(){return this._element}},{key:"show",value:function(){this.element.style.display=""}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"openPanel",value:function(e){var t;if(this.panel!==e){this.panel&&((null===(t=this.panel.view)||void 0===t?void 0:t.content)&&this._element.removeChild(this.panel.view.content.element),this.panel=void 0),this.panel=e;var n=new T;if(this.panel.view){var i=this,o=this.panel.view.content.onDidFocus,r=this.panel.view.content.onDidBlur,a=K(this._element),u=a.onDidFocus,s=a.onDidBlur;if(n.addDisposables(u((function(){return i._onDidFocus.fire()})),s((function(){return i._onDidBlur.fire()}))),o){var l=this;n.addDisposables(o((function(){return l._onDidFocus.fire()})))}if(r){var c=this;n.addDisposables(r((function(){return c._onDidBlur.fire()})))}this._element.appendChild(this.panel.view.content.element)}this.disposable.value=n}}},{key:"layout",value:function(e,t){}},{key:"closePanel",value:function(){var e,t,n;(null===(n=null===(t=null===(e=this.panel)||void 0===e?void 0:e.view)||void 0===t?void 0:t.content)||void 0===n?void 0:n.element)&&(this._element.removeChild(this.panel.view.content.element),this.panel=void 0)}},{key:"dispose",value:function(){this.disposable.dispose(),Gt(Ht(r.prototype),"dispose",this).call(this)}}])&&Lt(t.prototype,n),i&&Lt(t,i),r}(T);function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function $t(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qt(e,t){return!t||"object"!==tn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Ut=Jt||(Jt={}))[Ut.Tab=0]="Tab",Ut[Ut.Panel=1]="Panel",Ut[Ut.TabContainer=2]="TabContainer";var tn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function nn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Kt(e);if(t){var o=Kt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Qt(this,n)}}var on=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(r,e);var t,n,i,o=nn(r);function r(e){var t;return $t(this,r),(t=o.call(this)).el=e,t.disposable=new N,t._onDragStart=new S,t.onDragStart=t._onDragStart.event,t.iframes=[],t.configure(),t}return t=r,(n=[{key:"configure",value:function(){var e=this;this.addDisposables(this._onDragStart,O(this.el,"dragstart",(function(t){var n=e;e.iframes=en(Y("iframe")).concat(en(Y("webview")));var i=!0,o=!1,r=void 0;try{for(var a,u=e.iframes[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)a.value.style.pointerEvents="none"}catch(s){o=!0,r=s}finally{try{i||null==u.return||u.return()}finally{if(o)throw r}}e.el.classList.add("dragged"),setTimeout((function(){return n.el.classList.remove("dragged")}),0),e.disposable.value=e.getData(),t.dataTransfer&&(t.dataTransfer.effectAllowed="move")})),O(this.el,"dragend",(function(){var t=!0,n=!1,i=void 0;try{for(var o,r=e.iframes[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)o.value.style.pointerEvents="auto"}catch(a){n=!0,i=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}e.iframes=[],e.disposable.dispose()})))}}])&&Yt(t.prototype,n),i&&Yt(t,i),r}(T);function rn(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function an(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function un(e,t,n){return t&&an(e.prototype,t),n&&an(e,n),e}function sn(e,t,n){return(sn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ln(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}function fn(e,t){return!t||"object"!==vn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pn,dn,vn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function mn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ln(e);if(t){var o=ln(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fn(this,n)}}(dn=pn||(pn={})).CLICK="CLICK",dn.CONTEXT_MENU="CONTEXT_MENU";var yn=function(e){cn(n,e);var t=mn(n);function n(e,i,o){var r;return rn(this,n),(r=t.call(this)).panelId=e,r.group=o,r._onChanged=new S,r.onChanged=r._onChanged.event,r._onDropped=new S,r.onDrop=r._onDropped.event,r.addDisposables(r._onChanged,r._onDropped),r._element=document.createElement("div"),r._element.className="tab",r._element.tabIndex=0,r._element.draggable=!0,X(r.element,"inactive-tab",!0),r.addDisposables(new(function(t){cn(r,t);var n=mn(r);function r(){var e;return rn(this,r),(e=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).panelTransfer=m.getInstance(),e}return un(r,[{key:"getData",value:function(){var t=this;return this.panelTransfer.setData([new d(i.id,o.id,e)],d.prototype),{dispose:function(){t.panelTransfer.clearData(d.prototype)}}}},{key:"dispose",value:function(){}}]),r}(on))(r._element)),r.addDisposables(O(r._element,"mousedown",(function(e){e.defaultPrevented||(e.stopPropagation(),r._onChanged.fire({kind:pn.CLICK,event:e}))})),O(r._element,"contextmenu",(function(e){r._onChanged.fire({kind:pn.CONTEXT_MENU,event:e})}))),r.droptarget=new $e(r._element,{validOverlays:"none",canDisplayOverlay:function(e){var t=y();return t?r.panelId!==t.panelId:r.group.model.canDisplayOverlay(e,Jt.Tab)}}),r.addDisposables(r.droptarget.onDrop((function(e){r._onDropped.fire(e)}))),r}return un(n,[{key:"element",get:function(){return this._element}},{key:"setActive",value:function(e){X(this.element,"active-tab",e),X(this.element,"inactive-tab",!e)}},{key:"setContent",value:function(e){this.content&&this._element.removeChild(this.content.element),this.content=e,this._element.appendChild(this.content.element)}},{key:"dispose",value:function(){sn(ln(n.prototype),"dispose",this).call(this),this.droptarget.dispose()}}]),n}(T);function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function gn(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function wn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t,n){return(_n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e,t){return!t||"object"!==Dn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e){return function(e){if(Array.isArray(e))return bn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Dn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Sn(e);if(t){var o=Sn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return kn(this,n)}}var En=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(r,e);var t,n,i,o=Pn(r);function r(e,t,n){var i;return gn(this,r),(i=o.call(this)).accessor=e,i.group=t,i.tabs=[],i.selectedIndex=-1,i._hidden=!1,i._onDrop=new S,i.onDrop=i._onDrop.event,i.addDisposables(i._onDrop),i._element=document.createElement("div"),i._element.className="tabs-and-actions-container",i.height=n.tabHeight,i.actionContainer=document.createElement("div"),i.actionContainer.className="action-container",i.tabContainer=document.createElement("div"),i.tabContainer.className="tabs-container",i.voidContainer=document.createElement("div"),i.voidContainer.className="void-container",i._element.appendChild(i.tabContainer),i._element.appendChild(i.voidContainer),i._element.appendChild(i.actionContainer),i.voidDropTarget=new $e(i.voidContainer,{validOverlays:"none",canDisplayOverlay:function(e){var n,o,r=y();return r?(null===(n=(o=i.tabs).length>0?o[o.length-1]:void 0)||void 0===n?void 0:n.value.panelId)!==r.panelId:t.model.canDisplayOverlay(e,Jt.Panel)}}),i.addDisposables(i.voidDropTarget.onDrop((function(e){i._onDrop.fire({event:e.nativeEvent,index:i.tabs.length})})),i.voidDropTarget,O(i.tabContainer,"mousedown",(function(e){e.defaultPrevented||0===e.button&&i.accessor.doSetGroupActive(i.group)}))),i}return t=r,n=[{key:"panels",get:function(){return this.tabs.map((function(e){return e.value.panelId}))}},{key:"size",get:function(){return this.tabs.length}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,"number"!==typeof e?this.element.style.removeProperty("--dv-tabs-and-actions-container-height"):this.element.style.setProperty("--dv-tabs-and-actions-container-height","".concat(e,"px"))}},{key:"hidden",get:function(){return this._hidden},set:function(e){this._hidden=e,this.element.style.display=e?"none":""}},{key:"show",value:function(){this.hidden||(this.element.style.display="")}},{key:"hide",value:function(){this._element.style.display="none"}},{key:"setActionElement",value:function(e){this.actions!==e&&(this.actions&&(this.actions.remove(),this.actions=void 0),e&&(this.actionContainer.appendChild(e),this.actions=e))}},{key:"element",get:function(){return this._element}},{key:"isActive",value:function(e){return this.selectedIndex>-1&&this.tabs[this.selectedIndex].value===e}},{key:"at",value:function(e){var t;return null===(t=this.tabs[e])||void 0===t?void 0:t.value}},{key:"indexOf",value:function(e){return this.tabs.findIndex((function(t){return t.value.panelId===e}))}},{key:"setActive",value:function(e){}},{key:"addTab",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tabs.length;if(t<0||t>this.tabs.length)throw new Error("invalid location");this.tabContainer.insertBefore(e.value.element,this.tabContainer.children[t]),this.tabs=Cn(this.tabs.slice(0,t)).concat([e],Cn(this.tabs.slice(t))),this.selectedIndex<0&&(this.selectedIndex=t)}},{key:"delete",value:function(e){var t=this.tabs.findIndex((function(t){return t.value.panelId===e})),n=this.tabs.splice(t,1)[0],i=n.value;n.disposable.dispose(),i.element.remove()}},{key:"setActivePanel",value:function(e){this.tabs.forEach((function(t){var n=e.id===t.value.panelId;t.value.setActive(n)}))}},{key:"openPanel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tabs.length,i=this;if(!this.tabs.find((function(t){return t.value.panelId===e.id}))){var o=new yn(e.id,this.accessor,this.group);if(!(null===(t=e.view)||void 0===t?void 0:t.tab))throw new Error("invalid header component");o.setContent(e.view.tab);var r=T.from(o.onChanged((function(t){var n,o=e.id===(null===(n=i.group.model.activePanel)||void 0===n?void 0:n.id)&&i.group.model.isContentFocused;i.accessor.fireMouseEvent(Object.assign(Object.assign({},t),{panel:e,tab:!0})),0===t.event.button&&!t.event.defaultPrevented&&t.kind===pn.CLICK&&i.group.model.openPanel(e,{skipFocus:o})})),o.onDrop((function(e){i._onDrop.fire({event:e.nativeEvent,index:i.tabs.findIndex((function(e){return e.value===o}))})}))),a={value:o,disposable:r};this.addTab(a,n)}}},{key:"closePanel",value:function(e){this.delete(e.id)}},{key:"dispose",value:function(){_n(Sn(r.prototype),"dispose",this).call(this),this.tabs.forEach((function(e){e.disposable.dispose()})),this.tabs=[]}}],n&&wn(t.prototype,n),i&&wn(t,i),r}(T);function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zn(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function xn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rn(e,t,n){return(Rn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=In(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t){return!t||"object"!==Gn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){return function(e){if(Array.isArray(e))return An(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vn,Ln,Gn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Hn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=In(e);if(t){var o=In(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return jn(this,n)}}(Ln=Vn||(Vn={})).ADD_PANEL="ADD_PANEL",Ln.REMOVE_PANEL="REMOVE_PANEL",Ln.PANEL_ACTIVE="PANEL_ACTIVE";var Mn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(r,e);var t,n,i,o=Hn(r);function r(e,t,n,i,a){var u;return zn(this,r),(u=o.call(this)).container=e,u.accessor=t,u.id=n,u.options=i,u.parent=a,u._isGroupActive=!1,u._locked=!1,u.mostRecentlyUsed=[],u._onDidChange=new S,u.onDidChange=u._onDidChange.event,u._width=0,u._height=0,u._panels=[],u._onMove=new S,u.onMove=u._onMove.event,u._onDidGroupChange=new S,u.onDidGroupChange=u._onDidGroupChange.event,u._onDidDrop=new S,u.onDidDrop=u._onDidDrop.event,u.container.classList.add("groupview"),u.addDisposables(u._onMove,u._onDidGroupChange,u._onDidChange,u._onDidDrop),u.tabsContainer=new En(u.accessor,u.parent,{tabHeight:i.tabHeight}),u.contentContainer=new Zt,u.dropTarget=new $e(u.contentContainer.element,{validOverlays:"all",canDisplayOverlay:function(e,t){if(u.locked&&!t)return!1;var n=y();return n?!(1===u._panels.length&&n.groupId===u.id):u.canDisplayOverlay(e,Jt.Panel)}}),e.append(u.tabsContainer.element,u.contentContainer.element),u.header.hidden=!!i.hideHeader,u.locked=!!i.locked,u.addDisposables(u._onMove,u._onDidGroupChange,u.tabsContainer.onDrop((function(e){u.handleDropEvent(e.event,Je.Center,e.index)})),u.contentContainer.onDidFocus((function(){u.accessor.doSetGroupActive(u.parent,!0)})),u.contentContainer.onDidBlur((function(){})),u.dropTarget.onDrop((function(e){u.handleDropEvent(e.nativeEvent,e.position)}))),u}return t=r,n=[{key:"element",get:function(){throw new Error("not supported")}},{key:"activePanel",get:function(){return this._activePanel}},{key:"locked",get:function(){return this._locked},set:function(e){this._locked=e}},{key:"isActive",get:function(){return this._isGroupActive}},{key:"panels",get:function(){return this._panels}},{key:"size",get:function(){return this._panels.length}},{key:"isEmpty",get:function(){return 0===this._panels.length}},{key:"minimumHeight",get:function(){return 100}},{key:"maximumHeight",get:function(){return Number.MAX_SAFE_INTEGER}},{key:"minimumWidth",get:function(){return 100}},{key:"maximumWidth",get:function(){return Number.MAX_SAFE_INTEGER}},{key:"hasWatermark",get:function(){return!(!this.watermark||!this.container.contains(this.watermark.element))}},{key:"header",get:function(){return this.tabsContainer}},{key:"isContentFocused",get:function(){return!!document.activeElement&&$(document.activeElement,this.contentContainer.element)}},{key:"initialize",value:function(){var e,t;if(null===(e=this.options)||void 0===e?void 0:e.panels){var n=this;this.options.panels.forEach((function(e){n.doAddPanel(e)}))}(null===(t=this.options)||void 0===t?void 0:t.activePanel)&&this.openPanel(this.options.activePanel),this.setActive(this.isActive,!0,!0),this.updateContainer()}},{key:"indexOf",value:function(e){return this.tabsContainer.indexOf(e.id)}},{key:"toJSON",value:function(){var e,t={views:this.tabsContainer.panels,activeView:null===(e=this._activePanel)||void 0===e?void 0:e.id,id:this.id};return this.locked&&(t.locked=!0),this.header.hidden&&(t.hideHeader=!0),t}},{key:"moveToNext",value:function(e){e||(e={}),e.panel||(e.panel=this.activePanel);var t,n=e.panel?this.panels.indexOf(e.panel):-1;if(n<this.panels.length-1)t=n+1;else{if(e.suppressRoll)return;t=0}this.openPanel(this.panels[t])}},{key:"moveToPrevious",value:function(e){if(e||(e={}),e.panel||(e.panel=this.activePanel),e.panel){var t,n=this.panels.indexOf(e.panel);if(n>0)t=n-1;else{if(e.suppressRoll)return;t=this.panels.length-1}this.openPanel(this.panels[t])}}},{key:"containsPanel",value:function(e){return this.panels.includes(e)}},{key:"init",value:function(e){}},{key:"update",value:function(e){}},{key:"focus",value:function(){var e;null===(e=this._activePanel)||void 0===e||e.focus()}},{key:"openPanel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};("number"!==typeof t.index||t.index>this.panels.length)&&(t.index=this.panels.length);var n=!!t.skipSetActive;e.updateParentGroup(this.parent,!0),n||this._activePanel!==e?(this.doAddPanel(e,t.index,n),n||(this.doSetActivePanel(e),this.accessor.doSetGroupActive(this.parent,!!t.skipFocus)),this.updateContainer()):this.accessor.doSetGroupActive(this.parent)}},{key:"removePanel",value:function(e){var t="string"===typeof e?e:e.id,n=this._panels.find((function(e){return e.id===t}));if(!n)throw new Error("invalid operation");return this._removePanel(n)}},{key:"closeAllPanels",value:function(){if(this.panels.length>0){var e=Nn(this.panels),t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;this.doClose(a)}}catch(u){n=!0,i=u}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}else this.accessor.removeGroup(this.parent)}},{key:"closePanel",value:function(e){this.doClose(e)}},{key:"doClose",value:function(e){this.accessor.removePanel(e)}},{key:"isPanelActive",value:function(e){return this._activePanel===e}},{key:"updateActions",value:function(){var e,t;this.isActive&&(null===(t=null===(e=this._activePanel)||void 0===e?void 0:e.view)||void 0===t?void 0:t.actions)?this.tabsContainer.setActionElement(this._activePanel.view.actions.element):this.tabsContainer.setActionElement(void 0)}},{key:"setActive",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o||this.isActive!==e?(this._isGroupActive=e,X(this.container,"active-group",e),X(this.container,"inactive-group",!e),this.tabsContainer.setActive(this.isActive),!this._activePanel&&this.panels.length>0&&this.doSetActivePanel(this.panels[0]),this.updateContainer(),e&&(i||null===(n=this._activePanel)||void 0===n||n.focus())):i||null===(t=this._activePanel)||void 0===t||t.focus()}},{key:"layout",value:function(e,t){var n;this._width=e,this._height=t,this.contentContainer.layout(this._width,this._height),(null===(n=this._activePanel)||void 0===n?void 0:n.layout)&&this._activePanel.layout(this._width,this._height)}},{key:"_removePanel",value:function(e){var t=this._activePanel===e;if(this.doRemovePanel(e),t&&this.panels.length>0){var n=this.mostRecentlyUsed[0];this.openPanel(n)}return this._activePanel&&0===this.panels.length&&this.doSetActivePanel(void 0),this.updateContainer(),e}},{key:"doRemovePanel",value:function(e){var t=this.panels.indexOf(e);this._activePanel===e&&this.contentContainer.closePanel(),this.tabsContainer.delete(e.id),this._panels.splice(t,1),this.mostRecentlyUsed.includes(e)&&this.mostRecentlyUsed.splice(this.mostRecentlyUsed.indexOf(e),1),this._onDidGroupChange.fire({kind:Vn.REMOVE_PANEL,panel:e})}},{key:"doAddPanel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.panels.length,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._panels.indexOf(e),o=i>-1;this.tabsContainer.openPanel(e,t),n||this.contentContainer.openPanel(e),this.tabsContainer.show(),this.contentContainer.show(),o||(this.updateMru(e),this.panels.splice(t,0,e),this._onDidGroupChange.fire({kind:Vn.ADD_PANEL,panel:e}))}},{key:"doSetActivePanel",value:function(e){this._activePanel=e,e&&(this.tabsContainer.setActivePanel(e),e.layout(this._width,this._height),this.updateMru(e),this._onDidGroupChange.fire({kind:Vn.PANEL_ACTIVE,panel:e}))}},{key:"updateMru",value:function(e){this.mostRecentlyUsed.includes(e)&&this.mostRecentlyUsed.splice(this.mostRecentlyUsed.indexOf(e),1),this.mostRecentlyUsed=[e].concat(Nn(this.mostRecentlyUsed))}},{key:"updateContainer",value:function(){var e=this;if(this.updateActions(),X(this.container,"empty",this.isEmpty),this.panels.forEach((function(t){return t.updateParentGroup(e.parent,e.isActive)})),this.isEmpty&&!this.watermark){var t=this,n=this.accessor.createWatermarkComponent();n.init({containerApi:new Nt(this.accessor),params:{},title:"",api:null}),this.watermark=n,O(this.watermark.element,"click",(function(){t.isActive||t.accessor.doSetGroupActive(t.parent)})),this.contentContainer.hide(),this.tabsContainer.hide(),this.container.appendChild(this.watermark.element),this.watermark.updateParentGroup(this.parent,!0)}!this.isEmpty&&this.watermark&&(this.watermark.element.remove(),this.watermark.dispose(),this.watermark=void 0,this.contentContainer.show(),this.tabsContainer.show())}},{key:"canDisplayOverlay",value:function(e,t){return!!this.accessor.options.showDndOverlay&&this.accessor.options.showDndOverlay(e,t)}},{key:"handleDropEvent",value:function(e,t,n){var i=y();if(i){if(-1!==this.tabsContainer.indexOf(i.panelId)&&1===this.tabsContainer.size)return;var o=i.groupId,r=i.panelId;if(this.id===o&&!t&&this.tabsContainer.indexOf(r)===n)return;this._onMove.fire({target:t,groupId:i.groupId,itemId:i.panelId,index:n})}else this._onDidDrop.fire({nativeEvent:e,position:t,index:n,getData:function(){return y()}})}},{key:"dispose",value:function(){var e;Rn(In(r.prototype),"dispose",this).call(this),null===(e=this.watermark)||void 0===e||e.dispose();var t=!0,n=!1,i=void 0;try{for(var o,a=this.panels[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)o.value.dispose()}catch(u){n=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.dropTarget.dispose(),this.tabsContainer.dispose(),this.contentContainer.dispose()}}],n&&xn(t.prototype,n),i&&xn(t,i),r}(T);function Bn(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Fn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wn(e,t,n){return(Wn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return!t||"object"!==Xn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function $n(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Jn(e);if(t){var o=Jn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Un(this,n)}}var Yn=ee();function Kn(e){switch(e){case"left":return Je.Left;case"right":return Je.Right;case"above":return Je.Top;case"below":return Je.Bottom;default:return Je.Center}}var Qn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(r,e);var t,n,i,o=$n(r);function r(e,t){var n;return Bn(this,r),(n=o.call(this))._element=e,n._id=Yn.next(),n._groups=new Map,n._onDidLayoutChange=new S,n.onDidLayoutChange=n._onDidLayoutChange.event,n._onDidRemoveGroup=new S,n.onDidRemoveGroup=n._onDidRemoveGroup.event,n._onDidAddGroup=new S,n.onDidAddGroup=n._onDidAddGroup.event,n._onDidActiveGroupChange=new S,n.onDidActiveGroupChange=n._onDidActiveGroupChange.event,n._bufferOnDidLayoutChange=new D,n.gridview=new At(!!t.proportionalLayout,t.styles,t.orientation),n.element.appendChild(n.gridview.element),n.layout(0,0,!0),n.addDisposables(n.gridview.onDidChange((function(){n._onDidLayoutChange.fire()}))),n.addDisposables(h.any(n.onDidAddGroup,n.onDidRemoveGroup,n.onDidActiveGroupChange)((function(){n._bufferOnDidLayoutChange.fire()})),n._bufferOnDidLayoutChange.onEvent((function(){n._onDidLayoutChange.fire()})),n._bufferOnDidLayoutChange),n}return t=r,n=[{key:"id",get:function(){return this._id}},{key:"element",get:function(){return this._element}},{key:"size",get:function(){return this._groups.size}},{key:"groups",get:function(){return Array.from(this._groups.values()).map((function(e){return e.value}))}},{key:"width",get:function(){return this.gridview.width}},{key:"height",get:function(){return this.gridview.height}},{key:"minimumHeight",get:function(){return this.gridview.minimumHeight}},{key:"maximumHeight",get:function(){return this.gridview.maximumHeight}},{key:"minimumWidth",get:function(){return this.gridview.minimumWidth}},{key:"maximumWidth",get:function(){return this.gridview.maximumWidth}},{key:"activeGroup",get:function(){return this._activeGroup}},{key:"setVisible",value:function(e,t){this.gridview.setViewVisible(Ct(e.element),t),this._onDidLayoutChange.fire()}},{key:"isVisible",value:function(e){return this.gridview.isViewVisible(Ct(e.element))}},{key:"doAddGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0],n=arguments.length>2?arguments[2]:void 0;this.gridview.addView(e,null!==n&&void 0!==n?n:ve.Distribute,t),this._onDidAddGroup.fire(e),this.doSetGroupActive(e)}},{key:"doRemoveGroup",value:function(e,t){if(!this._groups.has(e.id))throw new Error("invalid operation");var n=this._groups.get(e.id),i=this.gridview.remove(e,ve.Distribute);if(n&&!(null===t||void 0===t?void 0:t.skipDispose)&&(n.disposable.dispose(),n.value.dispose(),this._groups.delete(e.id)),this._onDidRemoveGroup.fire(e),!(null===t||void 0===t?void 0:t.skipActive)&&this._activeGroup===e){var o=Array.from(this._groups.values());this.doSetGroupActive(o.length>0?o[0].value:void 0)}return i}},{key:"getPanel",value:function(e){var t;return null===(t=this._groups.get(e))||void 0===t?void 0:t.value}},{key:"doSetGroupActive",value:function(e,t){this._activeGroup!==e&&(this._activeGroup&&(this._activeGroup.setActive(!1),t||this._activeGroup.focus()),e&&(e.setActive(!0),t||e.focus()),this._activeGroup=e,this._onDidActiveGroupChange.fire(e))}},{key:"removeGroup",value:function(e){this.doRemoveGroup(e)}},{key:"moveToNext",value:function(e){var t;if(e||(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}var n=Ct(e.group.element),i=null===(t=this.gridview.next(n))||void 0===t?void 0:t.view;this.doSetGroupActive(i)}},{key:"moveToPrevious",value:function(e){var t;if(e||(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}var n=Ct(e.group.element),i=null===(t=this.gridview.previous(n))||void 0===t?void 0:t.view;this.doSetGroupActive(i)}},{key:"layout",value:function(e,t,n){(n||e!==this.width||t!==this.height)&&(this.element.style.height="".concat(t,"px"),this.element.style.width="".concat(e,"px"),this.gridview.layout(e,t))}},{key:"dispose",value:function(){Wn(Jn(r.prototype),"dispose",this).call(this),this._onDidActiveGroupChange.dispose(),this._onDidAddGroup.dispose(),this._onDidRemoveGroup.dispose(),this._onDidLayoutChange.dispose();var e=!0,t=!1,n=void 0;try{for(var i,o=this.groups[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)i.value.dispose()}catch(a){t=!0,n=a}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.gridview.dispose()}}],n&&Fn(t.prototype,n),i&&Fn(t,i),r}(T);function qn(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function ei(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ti(e,t,n){return(ti="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ni(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ni(e){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ii(e,t){return!t||"object"!==ri(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ri=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ai(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ni(e);if(t){var o=ni(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ii(this,n)}}var ui=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(r,e);var t,n,i,o=ai(r);function r(e){var t;return qn(this,r),(t=o.call(this)).id=e,t._isFocused=!1,t._isActive=!1,t._isVisible=!0,t._width=0,t._height=0,t._onDidDimensionChange=new S({replay:!0}),t.onDidDimensionsChange=t._onDidDimensionChange.event,t._onDidChangeFocus=new S({replay:!0}),t.onDidFocusChange=t._onDidChangeFocus.event,t._onFocusEvent=new S,t.onFocusEvent=t._onFocusEvent.event,t._onDidVisibilityChange=new S({replay:!0}),t.onDidVisibilityChange=t._onDidVisibilityChange.event,t._onVisibilityChange=new S,t.onVisibilityChange=t._onVisibilityChange.event,t._onDidActiveChange=new S({replay:!0}),t.onDidActiveChange=t._onDidActiveChange.event,t._onActiveChange=new S,t.onActiveChange=t._onActiveChange.event,t.addDisposables(t._onDidDimensionChange,t._onDidChangeFocus,t._onDidVisibilityChange,t._onDidActiveChange,t._onFocusEvent,t._onActiveChange,t._onVisibilityChange,t.onDidFocusChange((function(e){t._isFocused=e.isFocused})),t.onDidActiveChange((function(e){t._isActive=e.isActive})),t.onDidVisibilityChange((function(e){t._isVisible=e.isVisible})),t.onDidDimensionsChange((function(e){t._width=e.width,t._height=e.height}))),t}return t=r,(n=[{key:"isFocused",get:function(){return this._isFocused}},{key:"isActive",get:function(){return this._isActive}},{key:"isVisible",get:function(){return this._isVisible}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"setVisible",value:function(e){this._onVisibilityChange.fire({isVisible:e})}},{key:"setActive",value:function(){this._onActiveChange.fire()}},{key:"dispose",value:function(){ti(ni(r.prototype),"dispose",this).call(this)}}])&&ei(t.prototype,n),i&&ei(t,i),r}(T);function si(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function li(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fi(e,t){return!t||"object"!==pi(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pi=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function di(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ci(e);if(t){var o=ci(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fi(this,n)}}var vi=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(r,e);var t,n,i,o=di(r);function r(e){var t;return si(this,r),(t=o.call(this,e))._onDidConstraintsChangeInternal=new S,t.onDidConstraintsChangeInternal=t._onDidConstraintsChangeInternal.event,t._onDidConstraintsChange=new S({replay:!0}),t.onDidConstraintsChange=t._onDidConstraintsChange.event,t._onDidSizeChange=new S,t.onDidSizeChange=t._onDidSizeChange.event,t.addDisposables(t._onDidConstraintsChangeInternal,t._onDidConstraintsChange,t._onDidSizeChange),t}return t=r,(n=[{key:"setConstraints",value:function(e){this._onDidConstraintsChangeInternal.fire(e)}},{key:"setSize",value:function(e){this._onDidSizeChange.fire(e)}}])&&li(t.prototype,n),i&&li(t,i),r}(ui);function mi(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function yi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){return!t||"object"!==_i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _i=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Si(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=bi(e);if(t){var o=bi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return gi(this,n)}}var ki=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(r,e);var t,n,i,o=Si(r);function r(e,t){var n;return mi(this,r),(n=o.call(this,e.id)).panel=e,n._onDidTitleChange=new S,n.onDidTitleChange=n._onDidTitleChange.event,n._titleChanged=new S,n.titleChanged=n._titleChanged.event,n._suppressClosableChanged=new S,n.suppressClosableChanged=n._suppressClosableChanged.event,n._onDidActiveGroupChange=new S,n.onDidActiveGroupChange=n._onDidActiveGroupChange.event,n._onDidGroupChange=new S,n.onDidGroupChange=n._onDidGroupChange.event,n.disposable=new N,n._group=t,n.addDisposables(n.disposable,n._onDidTitleChange,n._titleChanged,n._suppressClosableChanged,n._onDidGroupChange,n._onDidActiveGroupChange),n}return t=r,(n=[{key:"title",get:function(){return this.panel.title}},{key:"suppressClosable",get:function(){return!!this.panel.suppressClosable}},{key:"isGroupActive",get:function(){var e;return!!(null===(e=this.group)||void 0===e?void 0:e.isActive)}},{key:"group",get:function(){return this._group},set:function(e){var t=this.isGroupActive;if(this._group=e,this._onDidGroupChange.fire(),this._group){var n=this;this.disposable.value=this._group.api.onDidActiveChange((function(){n._onDidActiveGroupChange.fire()})),this.isGroupActive!==t&&this._onDidActiveGroupChange.fire()}}},{key:"setTitle",value:function(e){this._onDidTitleChange.fire({title:e})}},{key:"close",value:function(){if(!this.group)throw new Error("panel ".concat(this.id," has no group"));return this.group.model.closePanel(this.panel)}}])&&yi(t.prototype,n),i&&yi(t,i),r}(vi);function Oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ci(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Di(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ei(e,t){return!t||"object"!==zi(t)&&"function"!==typeof t?Oi(e):t}function Ai(e,t){return(Ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zi=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function xi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Pi(e);if(t){var o=Pi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ei(this,n)}}var Ri=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ai(e,t)}(r,e);var t,n,i,o=xi(r);function r(e,t,n,i){var a;return Ci(this,r),(a=o.call(this)).id=e,a.containerApi=n,a.mutableDisposable=new N,a._suppressClosable=!1,a._title="",a._group=i,a.api=new ki(Oi(a),a._group),a.addDisposables(a.api.onActiveChange((function(){t.setActivePanel(Oi(a))})),a.api.onDidTitleChange((function(e){var t=e.title;a.update({params:{title:t}})}))),a}return t=r,(n=[{key:"params",get:function(){var e;return null===(e=this._params)||void 0===e?void 0:e.params}},{key:"title",get:function(){return this._title}},{key:"suppressClosable",get:function(){return this._suppressClosable}},{key:"group",get:function(){return this._group}},{key:"view",get:function(){return this._view}},{key:"init",value:function(e){var t;this._params=e.params,this._view=e.view,this.setTitle(e.title),this.setSuppressClosable(e.suppressClosable||!1),null===(t=this.view)||void 0===t||t.init(Object.assign(Object.assign({},e),{api:this.api,containerApi:this.containerApi}))}},{key:"focus",value:function(){this.api._onFocusEvent.fire()}},{key:"toJSON",value:function(){return{id:this.id,view:this.view.toJSON(),params:Object.keys(this._params||{}).length>0?this._params:void 0,suppressClosable:this.suppressClosable||void 0,title:this.title}}},{key:"setTitle",value:function(e){var t;e!==(null===(t=this._params)||void 0===t?void 0:t.title)&&(this._title=e,this.api._titleChanged.fire({title:this.title}))}},{key:"setSuppressClosable",value:function(e){var t;e!==(null===(t=this._params)||void 0===t?void 0:t.suppressClosable)&&(this._suppressClosable=e,this.api._suppressClosableChanged.fire({suppressClosable:!!this.suppressClosable}))}},{key:"update",value:function(e){var t,n=e.params;this._params=Object.assign(Object.assign({},this._params||{}),e.params.params),"string"===typeof n.title&&this.setTitle(n.title),"boolean"===typeof n.suppressClosable&&this.setSuppressClosable(n.suppressClosable),null===(t=this.view)||void 0===t||t.update({params:{params:this._params,title:this.title,suppressClosable:this.suppressClosable}})}},{key:"updateParentGroup",value:function(e,t){var n;this._group=e,this.api.group=e;var i=this._group.model.isPanelActive(this);this.api._onDidActiveChange.fire({isActive:t&&i}),this.api._onDidVisibilityChange.fire({isVisible:i}),null===(n=this.view)||void 0===n||n.updateParentGroup(this._group,this._group.model.isPanelActive(this))}},{key:"layout",value:function(e,t){var n;this.api._onDidDimensionChange.fire({width:e,height:t-(this.group.model.header.height||0)}),null===(n=this.view)||void 0===n||n.layout(e,t)}},{key:"dispose",value:function(){var e;this.api.dispose(),this.mutableDisposable.dispose(),null===(e=this.view)||void 0===e||e.dispose()}}])&&Di(t.prototype,n),i&&Di(t,i),r}(T);function Ii(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function ji(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ti=function(){function e(){Ii(this,e),this._element=document.createElement("div"),this._element.className="actions-bar",this._list=document.createElement("ul"),this._list.className="actions-container",this._element.appendChild(this._list)}var t,n,i;return t=e,(n=[{key:"element",get:function(){return this._element}},{key:"add",value:function(e){document.createElement("li").className="action-item",this._list.appendChild(e)}}])&&ji(t.prototype,n),i&&ji(t,i),e}();function Ni(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Vi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Li(e,t,n){return(Li="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gi(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hi(e,t){return!t||"object"!==Bi(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bi=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Fi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Gi(e);if(t){var o=Gi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Hi(this,n)}}var Wi=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(r,e);var t,n,i,o=Fi(r);function r(){var e;Ni(this,r),(e=o.call(this))._element=document.createElement("div"),e._element.className="watermark";var t=document.createElement("div");t.className="watermark-title";var n=document.createElement("span");n.style.flexGrow="1";var i=document.createElement("div");i.className="watermark-content",e._element.appendChild(t),e._element.appendChild(i);var a=new Ti;t.appendChild(n),t.appendChild(a.element);var u=document.createElement("a");return u.className="close-action",a.add(u),e.addDisposables(O(u,"click",(function(t){var n;t.preventDefault(),e.group&&(null===(n=e.params)||void 0===n||n.containerApi.removeGroup(e.group))}))),e}return t=r,(n=[{key:"id",get:function(){return"watermark"}},{key:"update",value:function(e){}},{key:"focus",value:function(){}},{key:"toJSON",value:function(){return{}}},{key:"layout",value:function(e,t){}},{key:"init",value:function(e){var t=this;this.params=e,this.addDisposables(this.params.containerApi.onDidLayoutChange((function(){t.render()}))),this.render()}},{key:"updateParentGroup",value:function(e,t){this.group=e,this.render()}},{key:"element",get:function(){return this._element}},{key:"render",value:function(){var e=!!(this.params&&this.params.containerApi.size<=1);X(this.element,"has-actions",e)}},{key:"dispose",value:function(){Li(Gi(r.prototype),"dispose",this).call(this)}}])&&Vi(t.prototype,n),i&&Vi(t,i),r}(T);function Ji(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Ui(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Zi=function(){function e(t,n){Ji(this,e),this.layout=t,this.panelDeserializer=n}var t,n,i;return t=e,(n=[{key:"fromJSON",value:function(e){var t=e.data,n=t.views,i=t.activeView,o=this.layout.createGroup({id:t.id,locked:!!t.locked,hideHeader:!!t.hideHeader}),r=!0,a=!1,u=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,f=this.panelDeserializer.createPanel(c,o),h="string"===typeof i&&i===f.id;o.model.openPanel(f,{skipSetActive:!h})}}catch(p){a=!0,u=p}finally{try{r||null==l.return||l.return()}finally{if(a)throw u}}return!o.activePanel&&o.panels.length>0&&o.model.openPanel(o.panels[o.panels.length-1]),o}}])&&Ui(t.prototype,n),i&&Ui(t,i),e}();function Xi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,a="string"===typeof t?n[t]:void 0,u="string"===typeof t?i[t]:void 0;if(a&&u)throw new Error("Cannot create '".concat(e,"'. component '").concat(t,"' registered as both a component and frameworkComponent"));if(u){if(!o)throw new Error("Cannot create '".concat(e,"' for framework component '").concat(t,"'. you must register a frameworkPanelWrapper to use framework components"));return o.createComponent(e,t,u)}if(!a){if(r)return r();throw new Error("Cannot create '".concat(e,"', no component '").concat(t,"' provided"))}return new a(e,t)}function $i(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Yi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,t){return!t||"object"!==eo(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eo=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function to(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ki(e);if(t){var o=Ki(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Qi(this,n)}}var no=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(r,e);var t,n,i,o=to(r);function r(){var e;return $i(this,r),(e=o.call(this))._isPanelVisible=!1,e._isGroupActive=!1,e.params={},e._element=document.createElement("div"),e._element.className="default-tab",e._content=document.createElement("div"),e._content.className="tab-content",e._actionContainer=document.createElement("div"),e._actionContainer.className="action-container",e._list=document.createElement("ul"),e._list.className="tab-list",e.action=document.createElement("a"),e.action.className="tab-action",e._element.appendChild(e._content),e._element.appendChild(e._actionContainer),e._actionContainer.appendChild(e._list),e._list.appendChild(e.action),e.addDisposables(O(e._actionContainer,"mousedown",(function(e){e.preventDefault()}))),e.render(),e}return t=r,(n=[{key:"element",get:function(){return this._element}},{key:"id",get:function(){return"__DEFAULT_TAB__"}},{key:"update",value:function(e){this.params=Object.assign(Object.assign({},this.params),e.params),this.render()}},{key:"toJSON",value:function(){return{id:this.id}}},{key:"focus",value:function(){}},{key:"init",value:function(e){if(this.params=e,this._content.textContent=e.title,this.params.suppressClosable)this.action.classList.add("disable-close");else{var t=this;O(this.action,"click",(function(e){e.preventDefault(),t.params.api.close()}))}}},{key:"updateParentGroup",value:function(e,t){var n=this._isPanelVisible!==t||this._isGroupActive!==e.isActive;this._isPanelVisible=t,this._isGroupActive=e.isActive,n&&this.render()}},{key:"layout",value:function(e,t){}},{key:"render",value:function(){this._content.textContent!==this.params.title&&(this._content.textContent=this.params.title)}}])&&Yi(t.prototype,n),i&&Yi(t,i),r}(T);function io(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function oo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ro(e,t,n){return(ro="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ao(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uo(e,t){return!t||"object"!==lo(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lo=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function co(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ao(e);if(t){var o=ao(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return uo(this,n)}}var fo=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(r,e);var t,n,i,o=co(r);function r(e,t,n){var i;io(this,r),(i=o.call(this)).id=e,i.component=t,i.api=n,i._height=0,i._width=0,i._element=document.createElement("div"),i._element.tabIndex=-1,i._element.style.outline="none",i._element.style.height="100%",i._element.style.width="100%",i._element.style.overflow="hidden";var a=K(i._element),u=a.onDidFocus,s=a.onDidBlur;return i.addDisposables(i.api,u((function(){i.api._onDidChangeFocus.fire({isFocused:!0})})),s((function(){i.api._onDidChangeFocus.fire({isFocused:!1})}))),i}return t=r,(n=[{key:"element",get:function(){return this._element}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"params",get:function(){var e;return null===(e=this._params)||void 0===e?void 0:e.params}},{key:"focus",value:function(){this.api._onFocusEvent.fire()}},{key:"layout",value:function(e,t){this._width=e,this._height=t,this.api._onDidDimensionChange.fire({width:e,height:t}),this.part&&this._params&&this.part.update(this._params.params)}},{key:"init",value:function(e){this._params=e,this.part=this.getComponent()}},{key:"update",value:function(e){var t,n;this._params=Object.assign(Object.assign({},this._params),{params:Object.assign(Object.assign({},null===(t=this._params)||void 0===t?void 0:t.params),e.params)}),null===(n=this.part)||void 0===n||n.update({params:this._params.params})}},{key:"toJSON",value:function(){var e,t,n=null!==(t=null===(e=this._params)||void 0===e?void 0:e.params)&&void 0!==t?t:{};return{id:this.id,component:this.component,params:Object.keys(n).length>0?n:void 0}}},{key:"dispose",value:function(){var e;ro(ao(r.prototype),"dispose",this).call(this),this.api.dispose(),null===(e=this.part)||void 0===e||e.dispose()}}])&&oo(t.prototype,n),i&&oo(t,i),r}(T);function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function po(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function vo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mo(e,t,n){return(mo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yo(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return!t||"object"!==wo(t)&&"function"!==typeof t?ho(e):t}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wo=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=yo(e);if(t){var o=yo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return bo(this,n)}}var So=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(r,e);var t,n,i,o=_o(r);function r(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vi(e);return po(this,r),(n=o.call(this,e,t,i))._evaluatedMinimumWidth=0,n._evaluatedMaximumWidth=Number.MAX_SAFE_INTEGER,n._evaluatedMinimumHeight=0,n._evaluatedMaximumHeight=Number.MAX_SAFE_INTEGER,n._minimumWidth=0,n._minimumHeight=0,n._maximumWidth=Number.MAX_SAFE_INTEGER,n._maximumHeight=Number.MAX_SAFE_INTEGER,n._snap=!1,n._onDidChange=new S,n.onDidChange=n._onDidChange.event,n.addDisposables(n._onDidChange,n.api.onVisibilityChange((function(e){var t=e.isVisible;n._params.accessor.setVisible(ho(n),t)})),n.api.onActiveChange((function(){n._params.accessor.setActive(ho(n))})),n.api.onDidConstraintsChangeInternal((function(e){"number"!==typeof e.minimumWidth&&"function"!==typeof e.minimumWidth||(n._minimumWidth=e.minimumWidth),"number"!==typeof e.minimumHeight&&"function"!==typeof e.minimumHeight||(n._minimumHeight=e.minimumHeight),"number"!==typeof e.maximumWidth&&"function"!==typeof e.maximumWidth||(n._maximumWidth=e.maximumWidth),"number"!==typeof e.maximumHeight&&"function"!==typeof e.maximumHeight||(n._maximumHeight=e.maximumHeight)})),n.api.onDidSizeChange((function(e){n._onDidChange.fire({height:e.height,width:e.width})}))),n}return t=r,(n=[{key:"priority",get:function(){return this._priority}},{key:"snap",get:function(){return this._snap}},{key:"minimumWidth",get:function(){var e="function"===typeof this._minimumWidth?this._minimumWidth():this._minimumWidth;return e!==this._evaluatedMinimumWidth&&(this._evaluatedMinimumWidth=e,this.updateConstraints()),e}},{key:"minimumHeight",get:function(){var e="function"===typeof this._minimumHeight?this._minimumHeight():this._minimumHeight;return e!==this._evaluatedMinimumHeight&&(this._evaluatedMinimumHeight=e,this.updateConstraints()),e}},{key:"maximumHeight",get:function(){var e="function"===typeof this._maximumHeight?this._maximumHeight():this._maximumHeight;return e!==this._evaluatedMaximumHeight&&(this._evaluatedMaximumHeight=e,this.updateConstraints()),e}},{key:"maximumWidth",get:function(){var e="function"===typeof this._maximumWidth?this._maximumWidth():this._maximumWidth;return e!==this._evaluatedMaximumWidth&&(this._evaluatedMaximumWidth=e,this.updateConstraints()),e}},{key:"isActive",get:function(){return this.api.isActive}},{key:"setVisible",value:function(e){this.api._onDidVisibilityChange.fire({isVisible:e})}},{key:"setActive",value:function(e){this.api._onDidActiveChange.fire({isActive:e})}},{key:"init",value:function(e){e.maximumHeight&&(this._maximumHeight=e.maximumHeight),e.minimumHeight&&(this._minimumHeight=e.minimumHeight),e.maximumWidth&&(this._maximumWidth=e.maximumWidth),e.minimumWidth&&(this._minimumWidth=e.minimumWidth),this._priority=e.priority,this._snap=!!e.snap,mo(yo(r.prototype),"init",this).call(this,e),"boolean"===typeof e.isVisible&&this.setVisible(e.isVisible)}},{key:"updateConstraints",value:function(){this.api._onDidConstraintsChange.fire({minimumWidth:this._evaluatedMinimumWidth,maximumWidth:this._evaluatedMaximumWidth,minimumHeight:this._evaluatedMinimumHeight,maximumHeight:this._evaluatedMaximumHeight})}},{key:"toJSON",value:function(){var e=mo(yo(r.prototype),"toJSON",this).call(this),t=function(e){return e===Number.MAX_SAFE_INTEGER?void 0:e},n=function(e){return e<=0?void 0:e};return Object.assign(Object.assign({},e),{minimumHeight:n(this.minimumHeight),maximumHeight:t(this.maximumHeight),minimumWidth:n(this.minimumWidth),maximumWidth:t(this.maximumWidth),snap:this.snap,priority:this.priority})}}])&&vo(t.prototype,n),i&&vo(t,i),r}(fo);function ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oo(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Do(e,t,n){return(Do="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Po(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}function Ao(e,t){return!t||"object"!==xo(t)&&"function"!==typeof t?ko(e):t}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xo=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ro(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Po(e);if(t){var o=Po(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ao(this,n)}}var Io=function(e){Eo(n,e);var t=Ro(n);function n(){return Oo(this,n),t.apply(this,arguments)}return n}(vi),jo=function(e){Eo(r,e);var t,n,i,o=Ro(r);function r(e,t,n){var i;return Oo(this,r),(i=o.call(this,t,"groupview_default",new Io(t)))._model=new Mn(i.element,e,t,n,ko(i)),i}return t=r,(n=[{key:"panels",get:function(){return this._model.panels}},{key:"activePanel",get:function(){return this._model.activePanel}},{key:"size",get:function(){return this._model.size}},{key:"model",get:function(){return this._model}},{key:"minimumHeight",get:function(){return this._model.minimumHeight}},{key:"maximumHeight",get:function(){return this._model.maximumHeight}},{key:"minimumWidth",get:function(){return this._model.minimumWidth}},{key:"maximumWidth",get:function(){return this._model.maximumWidth}},{key:"locked",get:function(){return this._model.locked},set:function(e){this._model.locked=e}},{key:"header",get:function(){return this._model.header}},{key:"initialize",value:function(){this._model.initialize()}},{key:"setActive",value:function(e){Do(Po(r.prototype),"setActive",this).call(this,e),this.model.setActive(e)}},{key:"layout",value:function(e,t){Do(Po(r.prototype),"layout",this).call(this,e,t),this.model.layout(e,t)}},{key:"getComponent",value:function(){return this._model}},{key:"toJSON",value:function(){return this.model.toJSON()}}])&&Co(t.prototype,n),i&&Co(t,i),r}(So);function To(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function No(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Vo=function(){function e(t){var n;!function(e,t){if(!To(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),this._content=t.content,this._tab=null!==(n=t.tab)&&void 0!==n?n:new no,this._actions=t.actions||(this.content.actions?{element:this.content.actions,dispose:function(){}}:void 0)}var t,n,i;return t=e,(n=[{key:"content",get:function(){return this._content}},{key:"tab",get:function(){return this._tab}},{key:"actions",get:function(){return this._actions}},{key:"init",value:function(e){this.content.init(Object.assign(Object.assign({},e),{tab:this.tab})),this.tab.init(e)}},{key:"updateParentGroup",value:function(e,t){var n;this._content.updateParentGroup(e,t),null===(n=this._tab)||void 0===n||n.updateParentGroup(e,t)}},{key:"layout",value:function(e,t){this.content.layout(e,t)}},{key:"update",value:function(e){this.content.update(e),this.tab.update(e)}},{key:"toJSON",value:function(){return{content:this.content.toJSON(),tab:(e=this.tab,t=no,(null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):To(e,t))?void 0:this.tab.toJSON())};var e,t}},{key:"dispose",value:function(){var e;this.content.dispose(),this.tab.dispose(),null===(e=this.actions)||void 0===e||e.dispose()}}])&&No(t.prototype,n),i&&No(t,i),e}();function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Mo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bo(e,t,n){return(Bo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fo(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wo(e,t){return!t||"object"!==Xo(t)&&"function"!==typeof t?Go(e):t}function Jo(e,t){return(Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||$o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(e){return function(e){if(Array.isArray(e))return Lo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Xo=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function $o(e,t){if(e){if("string"===typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lo(e,t):void 0}}function Yo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Fo(e);if(t){var o=Fo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Wo(this,n)}}var Ko=ee(),Qo=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(r,e);var t,n,i,o=Yo(r);function r(e,t){var n;return Ho(this,r),(n=o.call(this,e,{proportionalLayout:!0,orientation:t.orientation||le.HORIZONTAL,styles:t.styles}))._onTabInteractionEvent=new S,n.onTabInteractionEvent=n._onTabInteractionEvent.event,n._onTabContextMenu=new S,n.onTabContextMenu=n._onTabContextMenu.event,n._onDidDrop=new S,n.onDidDrop=n._onDidDrop.event,n._onDidRemovePanel=new S,n.onDidRemovePanel=n._onDidRemovePanel.event,n._onDidAddPanel=new S,n.onDidAddPanel=n._onDidAddPanel.event,n._onDidLayoutfromJSON=new S,n.onDidLayoutfromJSON=n._onDidLayoutfromJSON.event,n._onDidActivePanelChange=new S,n.onDidActivePanelChange=n._onDidActivePanelChange.event,n.addDisposables(n._onTabInteractionEvent,n._onTabContextMenu,n._onDidDrop,h.any(n.onDidAddPanel,n.onDidRemovePanel,n.onDidActivePanelChange)((function(){n._bufferOnDidLayoutChange.fire()}))),n._options=t,n.options.components||(n.options.components={}),n.options.frameworkComponents||(n.options.frameworkComponents={}),n.options.frameworkTabComponents||(n.options.frameworkTabComponents={}),n.options.tabComponents||(n.options.tabComponents={}),n.options.watermarkComponent||n.options.watermarkFrameworkComponent||(n.options.watermarkComponent=Wi),n._api=new Nt(Go(n)),n}return t=r,n=[{key:"totalPanels",get:function(){return this.panels.length}},{key:"panels",get:function(){return this.groups.flatMap((function(e){return e.panels}))}},{key:"deserializer",get:function(){return this._deserializer},set:function(e){this._deserializer=e}},{key:"options",get:function(){return this._options}},{key:"activePanel",get:function(){var e=this.activeGroup;if(e)return e.activePanel}},{key:"tabHeight",get:function(){return this.options.tabHeight},set:function(e){this.options.tabHeight=e,this._groups.forEach((function(t){t.value.model.header.height=e}))}},{key:"updateOptions",value:function(e){var t="string"===typeof e.orientation&&this.options.orientation!==e.orientation;this._options=Object.assign(Object.assign({},this.options),e),t&&(this.gridview.orientation=e.orientation),this.layout(this.gridview.width,this.gridview.height,!0)}},{key:"focus",value:function(){var e;null===(e=this.activeGroup)||void 0===e||e.focus()}},{key:"getGroupPanel",value:function(e){return this.panels.find((function(t){return t.id===e}))}},{key:"setActivePanel",value:function(e){this.doSetGroupActive(e.group),e.group.model.openPanel(e)}},{key:"moveToNext",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.group){if(!this.activeGroup)return;t.group=this.activeGroup}if(t.includePanel&&t.group&&t.group.activePanel!==t.group.panels[t.group.panels.length-1])t.group.model.moveToNext({suppressRoll:!0});else{var n=Ct(t.group.element),i=null===(e=this.gridview.next(n))||void 0===e?void 0:e.view;this.doSetGroupActive(i)}}},{key:"moveToPrevious",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.group){if(!this.activeGroup)return;t.group=this.activeGroup}if(t.includePanel&&t.group&&t.group.activePanel!==t.group.panels[0])t.group.model.moveToPrevious({suppressRoll:!0});else{var n=Ct(t.group.element),i=null===(e=this.gridview.previous(n))||void 0===e?void 0:e.view;i&&this.doSetGroupActive(i)}}},{key:"toJSON",value:function(){var e;return{grid:this.gridview.serialize(),panels:this.panels.reduce((function(e,t){return e[t.id]=t.toJSON(),e}),{}),activeGroup:null===(e=this.activeGroup)||void 0===e?void 0:e.id,options:{tabHeight:this.tabHeight}}}},{key:"fromJSON",value:function(e){var t=this,n=Array.from(this._groups.values()).map((function(e){return e.value})),i=!0,o=!1,r=void 0;try{for(var a,u=n[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value;this.removeGroup(s,!0)}}catch(d){o=!0,r=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw r}}if(this.gridview.clear(),!this.deserializer)throw new Error("invalid deserializer");var l=e.grid,c=e.panels,f=e.options,h=e.activeGroup;if("number"===typeof(null===f||void 0===f?void 0:f.tabHeight)&&(this.tabHeight=f.tabHeight),!this.deserializer)throw new Error("no deserializer provided");if(this.gridview.deserialize(l,new Zi(this,{createPanel:function(e,n){var i=c[e];return t.deserializer.fromJSON(i,n)}})),"string"===typeof h){var p=this.getPanel(h);p&&this.doSetGroupActive(p)}this.gridview.layout(this.width,this.height),this._onDidLayoutfromJSON.fire()}},{key:"closeAllGroups",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._groups.entries()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=Uo(i.value,2);r[0],r[1].value.model.closeAllPanels()}}catch(a){t=!0,n=a}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"fireMouseEvent",value:function(e){e.kind===pn.CONTEXT_MENU&&e.tab&&e.panel&&this._onTabContextMenu.fire({event:e.event,api:this._api,panel:e.panel})}},{key:"addPanel",value:function(e){var t,n,i,o;if(this.panels.find((function(t){return t.id===e.id})))throw new Error("panel with id ".concat(e.id," already exists"));if(null===(t=e.position)||void 0===t?void 0:t.referencePanel){var r=this.getGroupPanel(e.position.referencePanel);if(!r)throw new Error("referencePanel ".concat(e.position.referencePanel," does not exist"));i=this.findGroup(r)}else i=this.activeGroup;if(i){var a=Kn((null===(n=e.position)||void 0===n?void 0:n.direction)||"within");if(a===Je.Center)o=this.createPanel(e,i),i.model.openPanel(o);else{var u=Ct(i.element),s=Dt(this.gridview.orientation,u,a),l=this.createGroupAtLocation(s);o=this.createPanel(e,l),l.model.openPanel(o)}}else{var c=this.createGroupAtLocation();o=this.createPanel(e,c),c.model.openPanel(o)}return o}},{key:"removePanel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{removeEmptyGroup:!0,skipDispose:!1},n=e.group;if(!n)throw new Error("cannot remove panel ".concat(e.id,". it's missing a group."));n.model.removePanel(e),e.dispose();var i=1===this.size;!i&&0===n.size&&t.removeEmptyGroup&&this.removeGroup(n)}},{key:"createWatermarkComponent",value:function(){var e;return Xi("watermark-id","watermark-name",this.options.watermarkComponent?{"watermark-name":this.options.watermarkComponent}:{},this.options.watermarkFrameworkComponent?{"watermark-name":this.options.watermarkFrameworkComponent}:{},null===(e=this.options.frameworkComponentFactory)||void 0===e?void 0:e.watermark)}},{key:"addEmptyGroup",value:function(e){var t=this.createGroup();if(e){var n=this.panels.find((function(t){return t.id===e.referencePanel}));if(!n)throw new Error("reference panel ".concat(e.referencePanel," does not exist"));var i=this.findGroup(n);if(!i)throw new Error("reference group for reference panel ".concat(e.referencePanel," does not exist"));var o=Kn(e.direction||"within"),r=Ct(i.element),a=Dt(this.gridview.orientation,r,o);this.doAddGroup(t,a)}else this.doAddGroup(t)}},{key:"removeGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Zo(e.panels),i=!0,o=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;this.removePanel(l,{removeEmptyGroup:!1,skipDispose:!1})}}catch(c){o=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}Bo(Fo(r.prototype),"doRemoveGroup",this).call(this,e,{skipActive:t})}},{key:"moveGroupOrPanel",value:function(e,t,n,i,o){var r,a=t?null===(r=this._groups.get(t))||void 0===r?void 0:r.value:void 0;if(i&&i!==Je.Center){var u=Ct(e.element),s=Dt(this.gridview.orientation,u,i);if(a&&a.size<2){var l=Uo(te(s),2),c=l[0],f=l[1],h=Uo(te(Ct(a.element)),2),p=h[0],d=h[1];if(ne(p,c))this.gridview.moveView(p,d,f);else{var v=this.doRemoveGroup(a,{skipActive:!0,skipDispose:!0}),m=Ct(e.element),y=Dt(this.gridview.orientation,m,i);this.doAddGroup(v,y)}}else{var b=(null===a||void 0===a?void 0:a.model.removePanel(n))||this.panels.find((function(e){return e.id===n}));if(!b)throw new Error("No panel with id ".concat(n));var g=Dt(this.gridview.orientation,u,i);this.createGroupAtLocation(g).model.openPanel(b)}}else{var w=(null===a||void 0===a?void 0:a.model.removePanel(n))||this.panels.find((function(e){return e.id===n}));if(!w)throw new Error("No panel with id ".concat(n));0===(null===a||void 0===a?void 0:a.model.size)&&this.doRemoveGroup(a),e.model.openPanel(w,{index:o})}}},{key:"doSetGroupActive",value:function(e,t){var n,i,o=this._activeGroup===e;Bo(Fo(r.prototype),"doSetGroupActive",this).call(this,e,t),!o&&(null===(n=this._activeGroup)||void 0===n?void 0:n.activePanel)&&this._onDidActivePanelChange.fire(null===(i=this._activeGroup)||void 0===i?void 0:i.activePanel)}},{key:"createGroup",value:function(e){e||(e={tabHeight:this.tabHeight}),"number"!==typeof e.tabHeight&&(e.tabHeight=this.tabHeight);var t=null===e||void 0===e?void 0:e.id;if(t&&this._groups.has(e.id)&&(console.warn("Duplicate group id ".concat(null===e||void 0===e?void 0:e.id,". reassigning group id to avoid errors")),t=void 0),!t)for(t=Ko.next();this._groups.has(t);)t=Ko.next();var n=new jo(this,t,e);if(n.init({params:{},accessor:null}),!this._groups.has(n.id)){var i=this,o=new T(n.model.onMove((function(e){var t=e.groupId,o=e.itemId,r=e.target,a=e.index;i.moveGroupOrPanel(n,t,o,r,a)})),n.model.onDidDrop((function(e){i._onDidDrop.fire(Object.assign(Object.assign({},e),{api:i._api}))})),n.model.onDidGroupChange((function(e){switch(e.kind){case Vn.ADD_PANEL:e.panel&&i._onDidAddPanel.fire(e.panel);break;case Vn.REMOVE_PANEL:e.panel&&i._onDidRemovePanel.fire(e.panel);break;case Vn.PANEL_ACTIVE:i._onDidActivePanelChange.fire(e.panel)}})));this._groups.set(n.id,{value:n,disposable:o})}return n.initialize(),"number"===typeof this.options.tabHeight&&(n.model.header.height=this.options.tabHeight),n}},{key:"createPanel",value:function(e,t){var n=new Vo({content:this.createContentComponent(e.id,e.component),tab:this.createTabComponent(e.id,e.tabComponent)}),i=new Ri(e.id,this,this._api,t);return i.init({view:n,title:e.title||e.id,suppressClosable:null===e||void 0===e?void 0:e.suppressClosable,params:(null===e||void 0===e?void 0:e.params)||{}}),i}},{key:"createContentComponent",value:function(e,t){var n;return Xi(e,t,this.options.components||{},this.options.frameworkComponents,null===(n=this.options.frameworkComponentFactory)||void 0===n?void 0:n.content)}},{key:"createTabComponent",value:function(e,t){var n;return Xi(e,t,this.options.tabComponents||{},this.options.frameworkTabComponents,null===(n=this.options.frameworkComponentFactory)||void 0===n?void 0:n.tab,(function(){return new no}))}},{key:"createGroupAtLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],t=this.createGroup();return this.doAddGroup(t,e),t}},{key:"findGroup",value:function(e){var t;return null===(t=Array.from(this._groups.values()).find((function(t){return t.value.model.containsPanel(e)})))||void 0===t?void 0:t.value}},{key:"dispose",value:function(){Bo(Fo(r.prototype),"dispose",this).call(this),this._onDidActivePanelChange.dispose(),this._onDidAddPanel.dispose(),this._onDidRemovePanel.dispose(),this._onDidLayoutfromJSON.dispose()}}],n&&Mo(t.prototype,n),i&&Mo(t,i),r}(Qn);function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function er(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function tr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nr(e,t,n){return(nr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ir(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function or(e,t){return!t||"object"!==ur(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ur=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function sr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ir(e);if(t){var o=ir(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return or(this,n)}}var lr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(r,e);var t,n,i,o=sr(r);function r(e,t){var n;return er(this,r),(n=o.call(this,e,{proportionalLayout:t.proportionalLayout,orientation:t.orientation,styles:t.styles}))._onDidLayoutfromJSON=new S,n.onDidLayoutFromJSON=n._onDidLayoutfromJSON.event,n._options=t,n.options.components||(n.options.components={}),n.options.frameworkComponents||(n.options.frameworkComponents={}),n}return t=r,(n=[{key:"orientation",get:function(){return this.gridview.orientation},set:function(e){this.gridview.orientation=e}},{key:"options",get:function(){return this._options}},{key:"deserializer",get:function(){return this._deserializer},set:function(e){this._deserializer=e}},{key:"updateOptions",value:function(e){var t="string"===typeof e.orientation&&this.options.orientation!==e.orientation;this._options=Object.assign(Object.assign({},this.options),e),t&&(this.gridview.orientation=e.orientation),this.layout(this.gridview.width,this.gridview.height,!0)}},{key:"removePanel",value:function(e){this.removeGroup(e)}},{key:"toJSON",value:function(){var e;return{grid:this.gridview.serialize(),activePanel:null===(e=this.activeGroup)||void 0===e?void 0:e.id}}},{key:"setVisible",value:function(e,t){this.gridview.setViewVisible(Ct(e.element),t)}},{key:"setActive",value:function(e){this._groups.forEach((function(t,n){t.value.setActive(e===t.value)}))}},{key:"focus",value:function(){var e;null===(e=this.activeGroup)||void 0===e||e.focus()}},{key:"fromJSON",value:function(e){var t=this,n=e.grid,i=e.activePanel,o=Array.from(this._groups.values()),r=!0,a=!1,u=void 0;try{for(var s,l=o[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;c.disposable.dispose(),this.doRemoveGroup(c.value,{skipActive:!0})}}catch(p){a=!0,u=p}finally{try{r||null==l.return||l.return()}finally{if(a)throw u}}this.gridview.clear();var f=[];if(this.gridview.deserialize(n,{fromJSON:function(e){var n=t,i=e.data,o=Xi(i.id,i.component,t.options.components||{},t.options.frameworkComponents||{},t.options.frameworkComponentFactory?{createComponent:t.options.frameworkComponentFactory.createComponent}:void 0);return f.push((function(){return o.init({params:i.params,minimumWidth:i.minimumWidth,maximumWidth:i.maximumWidth,minimumHeight:i.minimumHeight,maximumHeight:i.maximumHeight,priority:i.priority,snap:!!i.snap,accessor:n,isVisible:e.visible})})),t.registerPanel(o),o}}),this.layout(this.width,this.height,!0),f.forEach((function(e){return e()})),"string"===typeof i){var h=this.getPanel(i);h&&this.doSetGroupActive(h)}this._onDidLayoutfromJSON.fire()}},{key:"movePanel",value:function(e,t){var n,i,o=this.gridview.remove(e),r=null===(n=this._groups.get(t.reference))||void 0===n?void 0:n.value;if(!r)throw new Error("reference group ".concat(t.reference," does not exist"));var a=Kn(t.direction);if(a===Je.Center)throw new Error("".concat(a," not supported as an option"));var u=Ct(r.element);i=Dt(this.gridview.orientation,u,a),this.doAddGroup(o,i,t.size)}},{key:"addPanel",value:function(e){var t,n,i=e.location||[0];if(null===(t=e.position)||void 0===t?void 0:t.referencePanel){var o=null===(n=this._groups.get(e.position.referencePanel))||void 0===n?void 0:n.value;if(!o)throw new Error("reference group ".concat(e.position.referencePanel," does not exist"));var r=Kn(e.position.direction);if(r===Je.Center)throw new Error("".concat(r," not supported as an option"));var a=Ct(o.element);i=Dt(this.gridview.orientation,a,r)}var u=Xi(e.id,e.component,this.options.components||{},this.options.frameworkComponents||{},this.options.frameworkComponentFactory?{createComponent:this.options.frameworkComponentFactory.createComponent}:void 0);return u.init({params:e.params||{},minimumWidth:e.minimumWidth,maximumWidth:e.maximumWidth,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,priority:e.priority,snap:!!e.snap,accessor:this,isVisible:!0}),this.registerPanel(u),this.doAddGroup(u,i,e.size),u}},{key:"registerPanel",value:function(e){var t=this,n=new T(e.api.onDidFocusChange((function(n){n.isFocused&&t._groups.forEach((function(t){var n=t.value;n!==e?n.setActive(!1):n.setActive(!0)}))})));this._groups.set(e.id,{value:e,disposable:n})}},{key:"moveGroup",value:function(e,t,n){var i=this.getPanel(t);if(!i)throw new Error("invalid operation");var o=Ct(e.element),r=ar(te(Dt(this.gridview.orientation,o,n)),2),a=r[0],u=r[1],s=ar(te(Ct(i.element)),2),l=s[0],c=s[1];if(ne(l,a))this.gridview.moveView(l,c,u);else{var f=this.doRemoveGroup(i,{skipActive:!0,skipDispose:!0}),h=Ct(e.element),p=Dt(this.gridview.orientation,h,n);this.doAddGroup(f,p)}}},{key:"removeGroup",value:function(e){nr(ir(r.prototype),"removeGroup",this).call(this,e)}},{key:"dispose",value:function(){nr(ir(r.prototype),"dispose",this).call(this),this._onDidLayoutfromJSON.dispose()}}])&&tr(t.prototype,n),i&&tr(t,i),r}(Qn);function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fr(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function hr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pr(e,t,n){return(pr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dr(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vr(e,t){return!t||"object"!==br(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mr(e,t){return(mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var br=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function gr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=dr(e);if(t){var o=dr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return vr(this,n)}}var wr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mr(e,t)}(r,e);var t,n,i,o=gr(r);function r(e,t){var n;return fr(this,r),(n=o.call(this)).element=e,n._disposable=new N,n._panels=new Map,n._onDidLayoutfromJSON=new S,n.onDidLayoutFromJSON=n._onDidLayoutfromJSON.event,n._onDidAddView=new S,n.onDidAddView=n._onDidAddView.event,n._onDidRemoveView=new S,n.onDidRemoveView=n._onDidRemoveView.event,n._onDidLayoutChange=new S,n.onDidLayoutChange=n._onDidLayoutChange.event,n._options=t,t.components||(t.components={}),t.frameworkComponents||(t.frameworkComponents={}),n.splitview=new Se(n.element,t),n.addDisposables(n._disposable,n._onDidAddView,n._onDidLayoutfromJSON,n._onDidRemoveView,n._onDidLayoutChange),n}return t=r,(n=[{key:"panels",get:function(){return this.splitview.getViews()}},{key:"options",get:function(){return this._options}},{key:"length",get:function(){return this._panels.size}},{key:"orientation",get:function(){return this.splitview.orientation}},{key:"splitview",get:function(){return this._splitview},set:function(e){var t=this;this._splitview=e,this._disposable.value=new T(this._splitview.onDidSashEnd((function(){t._onDidLayoutChange.fire(void 0)})),this._splitview.onDidAddView((function(e){return t._onDidAddView.fire(e)})),this._splitview.onDidRemoveView((function(e){return t._onDidRemoveView.fire(e)})))}},{key:"minimumSize",get:function(){return this.splitview.minimumSize}},{key:"maximumSize",get:function(){return this.splitview.maximumSize}},{key:"height",get:function(){return this.splitview.orientation===le.HORIZONTAL?this.splitview.orthogonalSize:this.splitview.size}},{key:"width",get:function(){return this.splitview.orientation===le.HORIZONTAL?this.splitview.size:this.splitview.orthogonalSize}},{key:"updateOptions",value:function(e){var t="string"===typeof e.orientation&&this.options.orientation!==e.orientation;this._options=Object.assign(Object.assign({},this.options),e),t&&(this.splitview.orientation=e.orientation),this.splitview.layout(this.splitview.size,this.splitview.orthogonalSize)}},{key:"focus",value:function(){var e;null===(e=this._activePanel)||void 0===e||e.focus()}},{key:"movePanel",value:function(e,t){this.splitview.moveView(e,t)}},{key:"setVisible",value:function(e,t){var n=this.panels.indexOf(e);this.splitview.setViewVisible(n,t)}},{key:"setActive",value:function(e,t){this._activePanel=e,this.panels.filter((function(t){return t!==e})).forEach((function(e){e.api._onDidActiveChange.fire({isActive:!1}),t||e.focus()})),e.api._onDidActiveChange.fire({isActive:!0}),t||e.focus()}},{key:"removePanel",value:function(e,t){var n=this._panels.get(e.id);if(!n)throw new Error("unknown splitview panel ".concat(e.id));n.disposable.dispose(),n.value.dispose(),this._panels.delete(e.id);var i=this.panels.findIndex((function(t){return t===e}));this.splitview.removeView(i,t);var o=this.panels;o.length>0&&this.setActive(o[o.length-1])}},{key:"getPanel",value:function(e){return this.panels.find((function(t){return t.id===e}))}},{key:"addPanel",value:function(e){if(this._panels.has(e.id))throw new Error("panel ".concat(e.id," already exists"));var t=Xi(e.id,e.component,this.options.components||{},this.options.frameworkComponents||{},this.options.frameworkWrapper?{createComponent:this.options.frameworkWrapper.createComponent}:void 0);t.orientation=this.splitview.orientation,t.init({params:e.params||{},minimumSize:e.minimumSize,maximumSize:e.maximumSize,snap:e.snap,priority:e.priority,accessor:this});var n="number"===typeof e.size?e.size:ve.Distribute,i="number"===typeof e.index?e.index:void 0;return this.splitview.addView(t,n,i),this.doAddView(t),this.setActive(t),t}},{key:"layout",value:function(e,t){var n=yr(this.splitview.orientation===le.HORIZONTAL?[e,t]:[t,e],2),i=n[0],o=n[1];this.splitview.layout(i,o)}},{key:"doAddView",value:function(e){var t=this,n=e.api.onDidFocusChange((function(n){n.isFocused&&t.setActive(e,!0)}));this._panels.set(e.id,{disposable:n,value:e})}},{key:"toJSON",value:function(){var e,t=this;return{views:this.splitview.getViews().map((function(e,n){return{size:t.splitview.getViewSize(n),data:e.toJSON(),snap:!!e.snap,priority:e.priority}})),activeView:null===(e=this._activePanel)||void 0===e?void 0:e.id,size:this.splitview.size,orientation:this.splitview.orientation}}},{key:"fromJSON",value:function(e){var t=this,n=e.views,i=e.orientation,o=e.size,r=e.activeView,a=!0,u=!1,s=void 0;try{for(var l,c=this._panels.entries()[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=yr(l.value,2),h=(f[0],f[1]);h.disposable.dispose(),h.value.dispose()}}catch(v){u=!0,s=v}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}this._panels.clear(),this.splitview.dispose();var p=[];if(this.splitview=new Se(this.element,{orientation:i,proportionalLayout:this.options.proportionalLayout,descriptor:{size:o,views:n.map((function(e){var n=t,o=e.data;if(t._panels.has(o.id))throw new Error("panel ".concat(o.id," already exists"));var r=Xi(o.id,o.component,t.options.components||{},t.options.frameworkComponents||{},t.options.frameworkWrapper?{createComponent:t.options.frameworkWrapper.createComponent}:void 0);return p.push((function(){r.init({params:o.params||{},minimumSize:o.minimumSize,maximumSize:o.maximumSize,snap:e.snap,priority:e.priority,accessor:n})})),r.orientation=i,t.doAddView(r),setTimeout((function(){n._onDidAddView.fire(r)}),0),{size:e.size,view:r}}))}}),this.layout(this.width,this.height),p.forEach((function(e){return e()})),"string"===typeof r){var d=this.getPanel(r);d&&this.setActive(d)}this._onDidLayoutfromJSON.fire()}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._panels.entries()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=yr(i.value,2),u=(a[0],a[1]);u.disposable.dispose(),u.value.dispose()}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this._panels.clear(),this.splitview.dispose(),pr(dr(r.prototype),"dispose",this).call(this)}}])&&hr(t.prototype,n),i&&hr(t,i),r}(T);function _r(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Sr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e,t){return!t||"object"!==Dr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=kr(e);if(t){var o=kr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Or(this,n)}}var Er=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(r,e);var t,n,i,o=Pr(r);function r(e){var t;return _r(this,r),(t=o.call(this,e))._onDidConstraintsChangeInternal=new S,t.onDidConstraintsChangeInternal=t._onDidConstraintsChangeInternal.event,t._onDidConstraintsChange=new S({replay:!0}),t.onDidConstraintsChange=t._onDidConstraintsChange.event,t._onDidSizeChange=new S,t.onDidSizeChange=t._onDidSizeChange.event,t.addDisposables(t._onDidConstraintsChangeInternal,t._onDidConstraintsChange,t._onDidSizeChange),t}return t=r,(n=[{key:"setConstraints",value:function(e){this._onDidConstraintsChangeInternal.fire(e)}},{key:"setSize",value:function(e){this._onDidSizeChange.fire(e)}}])&&Sr(t.prototype,n),i&&Sr(t,i),r}(ui);function Ar(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function zr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return!t||"object"!==jr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Tr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=xr(e);if(t){var o=xr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Rr(this,n)}}var Nr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(r,e);var t,n,i,o=Tr(r);function r(e){var t;return Ar(this,r),(t=o.call(this,e))._onDidExpansionChange=new S({replay:!0}),t.onDidExpansionChange=t._onDidExpansionChange.event,t._onMouseEnter=new S({}),t.onMouseEnter=t._onMouseEnter.event,t._onMouseLeave=new S({}),t.onMouseLeave=t._onMouseLeave.event,t.addDisposables(t._onDidExpansionChange,t._onMouseEnter,t._onMouseLeave),t}return t=r,(n=[{key:"pane",set:function(e){this._pane=e}},{key:"setExpanded",value:function(e){var t;null===(t=this._pane)||void 0===t||t.setExpanded(e)}},{key:"isExpanded",get:function(){var e;return!!(null===(e=this._pane)||void 0===e?void 0:e.isExpanded())}}])&&zr(t.prototype,n),i&&zr(t,i),r}(Er);function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Hr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mr(e,t,n){return(Mr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Br(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t){return!t||"object"!==Ur(t)&&"function"!==typeof t?Lr(e):t}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ur=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Zr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Br(e);if(t){var o=Br(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Fr(this,n)}}function Xr(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function $r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yr(e,t,n){return t&&$r(e.prototype,t),n&&$r(e,n),e}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ea(e,t)}function qr(e,t){return!t||"object"!==ta(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ta=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function na(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Kr(e);if(t){var o=Kr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return qr(this,n)}}var ia=function(e){Qr(n,e);var t=na(n);function n(e,i,o,r,a,u){var s;return Xr(this,n),(s=t.call(this,e,i,o,r,a,!0))._onDidDrop=new S,s.onDidDrop=s._onDidDrop.event,u||s.initDragFeatures(),s}return Yr(n,[{key:"initDragFeatures",value:function(){var e=this;if(this.header){var t=this.id;this.header.draggable=!0,this.handler=new(function(e){Qr(i,e);var n=na(i);function i(){return Xr(this,i),n.apply(this,arguments)}return Yr(i,[{key:"getData",value:function(){return m.getInstance().setData([new v("paneview",t)],v.prototype),{dispose:function(){m.getInstance().clearData(v.prototype)}}}}]),i}(on))(this.header),this.target=new $e(this.element,{validOverlays:"vertical",canDisplayOverlay:function(){var t=b();return!t||t.paneId!==e.id}}),this.addDisposables(this._onDidDrop,this.handler,this.target,this.target.onDrop((function(t){e.onDrop(t)})))}}},{key:"onDrop",value:function(e){var t=b();if(t){var n=this._params.containerApi,i=t.paneId,o=n.getPanel(i);if(o){var r=n.panels,a=r.indexOf(o),u=n.panels.indexOf(this);e.position!==Je.Left&&e.position!==Je.Top||(u=Math.max(0,u-1)),e.position!==Je.Right&&e.position!==Je.Bottom||(a>u&&u++,u=Math.min(r.length-1,u)),n.movePanel(a,u)}else this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,getData:function(){return b()}}))}else this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,getData:function(){return b()}}))}}]),n}(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(r,e);var t,n,i,o=Zr(r);function r(e,t,n,i,a,u){var s;return Gr(this,r),(s=o.call(this,e,t,new Nr(e))).headerComponent=n,s._onDidChangeExpansionState=new S({replay:!0}),s.onDidChangeExpansionState=s._onDidChangeExpansionState.event,s._onDidChange=new S,s.onDidChange=s._onDidChange.event,s.headerSize=22,s._orthogonalSize=0,s._size=0,s._minimumBodySize=100,s._maximumBodySize=Number.POSITIVE_INFINITY,s._isExpanded=!1,s.expandedSize=0,s.api.pane=Lr(s),s._isExpanded=a,s._headerVisible=u,s._onDidChangeExpansionState.fire(s.isExpanded()),s._orientation=i,s.element.classList.add("pane"),s.addDisposables(s.api.onDidSizeChange((function(e){s._onDidChange.fire(e.size)})),O(s.element,"mouseenter",(function(e){s.api._onMouseEnter.fire(e)})),O(s.element,"mouseleave",(function(e){s.api._onMouseLeave.fire(e)}))),s.addDisposables(s._onDidChangeExpansionState,s.onDidChangeExpansionState((function(e){s.api._onDidExpansionChange.fire({isExpanded:e})})),s.api.onDidFocusChange((function(e){s.header&&(e.isFocused?Z(s.header,"focused"):U(s.header,"focused"))}))),s.renderOnce(),s}return t=r,(n=[{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e}},{key:"minimumSize",get:function(){return this.headerSize+(this.isExpanded()?this._minimumBodySize:0)}},{key:"maximumSize",get:function(){return this.headerSize+(this.isExpanded()?this._maximumBodySize:0)}},{key:"size",get:function(){return this._size}},{key:"orthogonalSize",get:function(){return this._orthogonalSize},set:function(e){this._orthogonalSize=e}},{key:"minimumBodySize",get:function(){return this._minimumBodySize},set:function(e){this._minimumBodySize="number"===typeof e?e:0}},{key:"maximumBodySize",get:function(){return this._maximumBodySize},set:function(e){this._maximumBodySize="number"===typeof e?e:Number.POSITIVE_INFINITY}},{key:"headerVisible",get:function(){return this._headerVisible},set:function(e){this._headerVisible=e,this.header.style.display=e?"":"none"}},{key:"setVisible",value:function(e){this.api._onDidVisibilityChange.fire({isVisible:e})}},{key:"setActive",value:function(e){this.api._onDidActiveChange.fire({isActive:e})}},{key:"isExpanded",value:function(){return this._isExpanded}},{key:"setExpanded",value:function(e){if(this._isExpanded!==e){if(this._isExpanded=e,e)this.animationTimer&&clearTimeout(this.animationTimer),this.body&&this.element.appendChild(this.body);else{var t=this;this.animationTimer=setTimeout((function(){var e;null===(e=t.body)||void 0===e||e.remove()}),200)}this._onDidChange.fire(e?this.width:void 0),this._onDidChangeExpansionState.fire(e)}}},{key:"layout",value:function(e,t){this._size=e,this._orthogonalSize=t;var n=Jr(this.orientation===le.HORIZONTAL?[e,t]:[t,e],2),i=n[0],o=n[1];this.isExpanded()&&(this.expandedSize=i),Mr(Br(r.prototype),"layout",this).call(this,i,o)}},{key:"init",value:function(e){var t,n;Mr(Br(r.prototype),"init",this).call(this,e),"number"===typeof e.minimumBodySize&&(this.minimumBodySize=e.minimumBodySize),"number"===typeof e.maximumBodySize&&(this.maximumBodySize=e.maximumBodySize),this.bodyPart=this.getBodyComponent(),this.headerPart=this.getHeaderComponent(),this.bodyPart.init(Object.assign(Object.assign({},e),{api:this.api})),this.headerPart.init(Object.assign(Object.assign({},e),{api:this.api})),null===(t=this.body)||void 0===t||t.append(this.bodyPart.element),null===(n=this.header)||void 0===n||n.append(this.headerPart.element),"boolean"===typeof e.isExpanded&&this.setExpanded(e.isExpanded)}},{key:"toJSON",value:function(){var e=this._params;return Object.assign(Object.assign({},Mr(Br(r.prototype),"toJSON",this).call(this)),{headerComponent:this.headerComponent,title:e.title})}},{key:"renderOnce",value:function(){this.header=document.createElement("div"),this.header.tabIndex=0,this.header.className="pane-header",this.header.style.height="".concat(this.headerSize,"px"),this.header.style.lineHeight="".concat(this.headerSize,"px"),this.header.style.minHeight="".concat(this.headerSize,"px"),this.header.style.maxHeight="".concat(this.headerSize,"px"),this.element.appendChild(this.header),this.body=document.createElement("div"),this.body.className="pane-body",this.element.appendChild(this.body)}},{key:"getComponent",value:function(){var e=this;return{update:function(t){var n,i;null===(n=e.bodyPart)||void 0===n||n.update({params:t}),null===(i=e.headerPart)||void 0===i||i.update({params:t})},dispose:function(){var t,n;null===(t=e.bodyPart)||void 0===t||t.dispose(),null===(n=e.headerPart)||void 0===n||n.dispose()}}}}])&&Hr(t.prototype,n),i&&Hr(t,i),r}(fo));function oa(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function ra(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function aa(e,t,n){return(aa="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ua(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sa(e,t){return!t||"object"!==ca(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function la(e,t){return(la=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ca=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function fa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ua(e);if(t){var o=ua(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return sa(this,n)}}var ha=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&la(e,t)}(r,e);var t,n,i,o=fa(r);function r(){var e;return oa(this,r),(e=o.call(this)).disposable=new N,e.apiRef={api:null},e._element=document.createElement("div"),e.element.className="default-header",e._content=document.createElement("span"),e._expander=document.createElement("a"),e.element.appendChild(e._content),e.element.appendChild(e._expander),e.addDisposables(O(e._expander,"click",(function(){var t;null===(t=e.apiRef.api)||void 0===t||t.setExpanded(!e.apiRef.api.isExpanded)}))),e}return t=r,(n=[{key:"element",get:function(){return this._element}},{key:"init",value:function(e){var t=this;this.apiRef.api=e.api,this._content.textContent=e.title,this._expander.textContent=e.api.isExpanded?"<":">",this.disposable.value=e.api.onDidExpansionChange((function(e){t._expander.textContent=e.isExpanded?"<":">"}))}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.disposable.dispose(),aa(ua(r.prototype),"dispose",this).call(this)}}])&&ra(t.prototype,n),i&&ra(t,i),r}(T);function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function da(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function va(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ma(e,t,n){return t&&va(e.prototype,t),n&&va(e,n),e}function ya(e,t,n){return(ya="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ba(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ga(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}function wa(e,t){return!t||"object"!==ka(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ka=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Oa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ba(e);if(t){var o=ba(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return wa(this,n)}}var Ca=function(e){ga(n,e);var t=Oa(n);function n(e){var i;return da(this,n),(i=t.call(this,e.id,e.component,e.headerComponent,e.orientation,e.isExpanded,e.disableDnd)).options=e,i}return ma(n,[{key:"getBodyComponent",value:function(){return this.options.body}},{key:"getHeaderComponent",value:function(){return this.options.header}}]),n}(ia),Da=function(e){ga(n,e);var t=Oa(n);function n(e,i){var o;return da(this,n),(o=t.call(this)).element=e,o._disposable=new N,o._viewDisposables=new Map,o._onDidLayoutfromJSON=new S,o.onDidLayoutFromJSON=o._onDidLayoutfromJSON.event,o._onDidLayoutChange=new S,o.onDidLayoutChange=o._onDidLayoutChange.event,o._onDidDrop=new S,o.onDidDrop=o._onDidDrop.event,o._onDidAddView=new S,o.onDidAddView=o._onDidAddView.event,o._onDidRemoveView=new S,o.onDidRemoveView=o._onDidRemoveView.event,o.addDisposables(o._onDidLayoutChange,o._onDidLayoutfromJSON,o._onDidDrop,o._onDidAddView,o._onDidRemoveView),o._options=i,i.components||(i.components={}),i.frameworkComponents||(i.frameworkComponents={}),o.paneview=new xe(o.element,{orientation:le.VERTICAL}),o.addDisposables(o._disposable),o}return ma(n,[{key:"panels",get:function(){return this.paneview.getPanes()}},{key:"paneview",get:function(){return this._paneview},set:function(e){var t=this;this._paneview=e,this._disposable.value=new T(this._paneview.onDidChange((function(){t._onDidLayoutChange.fire(void 0)})),this._paneview.onDidAddView((function(e){return t._onDidAddView.fire(e)})),this._paneview.onDidRemoveView((function(e){return t._onDidRemoveView.fire(e)})))}},{key:"minimumSize",get:function(){return this.paneview.minimumSize}},{key:"maximumSize",get:function(){return this.paneview.maximumSize}},{key:"height",get:function(){return this.paneview.orientation===le.HORIZONTAL?this.paneview.orthogonalSize:this.paneview.size}},{key:"width",get:function(){return this.paneview.orientation===le.HORIZONTAL?this.paneview.size:this.paneview.orthogonalSize}},{key:"options",get:function(){return this._options}},{key:"focus",value:function(){}},{key:"updateOptions",value:function(e){this._options=Object.assign(Object.assign({},this.options),e)}},{key:"addPanel",value:function(e){var t,n=Xi(e.id,e.component,this.options.components||{},this.options.frameworkComponents||{},this.options.frameworkWrapper?{createComponent:this.options.frameworkWrapper.body.createComponent}:void 0);t=e.headerComponent?Xi(e.id,e.headerComponent,this.options.headerComponents||{},this.options.headerframeworkComponents,this.options.frameworkWrapper?{createComponent:this.options.frameworkWrapper.header.createComponent}:void 0):new ha;var i=new Ca({id:e.id,component:e.component,headerComponent:e.headerComponent,header:t,body:n,orientation:le.VERTICAL,isExpanded:!!e.isExpanded,disableDnd:!!this.options.disableDnd});this.doAddPanel(i);var o="number"===typeof e.size?e.size:ve.Distribute,r="number"===typeof e.index?e.index:void 0;return i.init({params:e.params||{},minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize,isExpanded:e.isExpanded,title:e.title,containerApi:new jt(this)}),this.paneview.addPane(i,o,r),i.orientation=this.paneview.orientation,i}},{key:"removePanel",value:function(e){var t=this.panels.findIndex((function(t){return t===e}));this.paneview.removePane(t),this.doRemovePanel(e)}},{key:"movePanel",value:function(e,t){this.paneview.moveView(e,t)}},{key:"getPanel",value:function(e){return this.panels.find((function(t){return t.id===e}))}},{key:"layout",value:function(e,t){var n=Sa(this.paneview.orientation===le.HORIZONTAL?[e,t]:[t,e],2),i=n[0],o=n[1];this.paneview.layout(i,o)}},{key:"toJSON",value:function(){var e=this,t=function(e){return e===Number.MAX_SAFE_INTEGER||e===Number.POSITIVE_INFINITY?void 0:e};return{views:this.paneview.getPanes().map((function(n,i){var o;return{size:e.paneview.getViewSize(i),data:n.toJSON(),minimumSize:(o=n.minimumBodySize,o<=0?void 0:o),maximumSize:t(n.maximumBodySize),expanded:n.isExpanded()}})),size:this.paneview.size}}},{key:"fromJSON",value:function(e){var t=this,n=e.views,i=e.size,o=[],r=!0,a=!1,u=void 0;try{for(var s,l=this._viewDisposables.entries()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=Sa(s.value,2);c[0];c[1].dispose()}}catch(f){a=!0,u=f}finally{try{r||null==l.return||l.return()}finally{if(a)throw u}}this._viewDisposables.clear(),this.paneview.dispose(),this.paneview=new xe(this.element,{orientation:le.VERTICAL,descriptor:{size:i,views:n.map((function(e){var n,i=t,r=e.data,a=Xi(r.id,r.component,t.options.components||{},t.options.frameworkComponents||{},t.options.frameworkWrapper?{createComponent:t.options.frameworkWrapper.body.createComponent}:void 0);n=r.headerComponent?Xi(r.id,r.headerComponent,t.options.headerComponents||{},t.options.headerframeworkComponents||{},t.options.frameworkWrapper?{createComponent:t.options.frameworkWrapper.header.createComponent}:void 0):new ha;var u=new Ca({id:r.id,component:r.component,headerComponent:r.headerComponent,header:n,body:a,orientation:le.VERTICAL,isExpanded:!!e.expanded,disableDnd:!!t.options.disableDnd});return t.doAddPanel(u),o.push((function(){u.init({params:r.params||{},minimumBodySize:e.minimumSize,maximumBodySize:e.maximumSize,title:r.title,isExpanded:!!e.expanded,containerApi:new jt(i)}),u.orientation=i.paneview.orientation})),setTimeout((function(){i._onDidAddView.fire(u)}),0),{size:e.size,view:u}}))}}),this.layout(this.width,this.height),o.forEach((function(e){return e()})),this._onDidLayoutfromJSON.fire()}},{key:"doAddPanel",value:function(e){var t=this,n=e.onDidDrop((function(e){t._onDidDrop.fire(e)}));this._viewDisposables.set(e.id,n)}},{key:"doRemovePanel",value:function(e){var t=this._viewDisposables.get(e.id);t&&(t.dispose(),this._viewDisposables.delete(e.id))}},{key:"dispose",value:function(){ya(ba(n.prototype),"dispose",this).call(this);var e=!0,t=!1,i=void 0;try{for(var o,r=this._viewDisposables.entries()[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=Sa(o.value,2);a[0];a[1].dispose()}}catch(u){t=!0,i=u}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}this._viewDisposables.clear(),this.paneview.dispose()}}]),n}(T);function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xa(e,t,n){return(xa="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ra(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ia(e,t){return!t||"object"!==Na(t)&&"function"!==typeof t?Ea(e):t}function ja(e,t){return(ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Na=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Va(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ra(e);if(t){var o=Ra(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ia(this,n)}}var La=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(r,e);var t,n,i,o=Va(r);function r(e,t){var n;return Aa(this,r),(n=o.call(this,e,t,new Er(e)))._evaluatedMinimumSize=0,n._evaluatedMaximumSize=Number.POSITIVE_INFINITY,n._minimumSize=0,n._maximumSize=Number.POSITIVE_INFINITY,n._snap=!1,n._onDidChange=new S,n.onDidChange=n._onDidChange.event,n.addDisposables(n._onDidChange,n.api.onVisibilityChange((function(e){var t=e.isVisible;n._params.accessor.setVisible(Ea(n),t)})),n.api.onActiveChange((function(){n._params.accessor.setActive(Ea(n))})),n.api.onDidConstraintsChangeInternal((function(e){"number"!==typeof e.minimumSize&&"function"!==typeof e.minimumSize||(n._minimumSize=e.minimumSize),"number"!==typeof e.maximumSize&&"function"!==typeof e.maximumSize||(n._maximumSize=e.maximumSize),n.updateConstraints()})),n.api.onDidSizeChange((function(e){n._onDidChange.fire(e.size)}))),n}return t=r,(n=[{key:"priority",get:function(){return this._priority}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e}},{key:"minimumSize",get:function(){var e="function"===typeof this._minimumSize?this._minimumSize():this._minimumSize;return e!==this._evaluatedMinimumSize&&(this._evaluatedMinimumSize=e,this.updateConstraints()),e}},{key:"maximumSize",get:function(){var e="function"===typeof this._maximumSize?this._maximumSize():this._maximumSize;return e!==this._evaluatedMaximumSize&&(this._evaluatedMaximumSize=e,this.updateConstraints()),e}},{key:"snap",get:function(){return this._snap}},{key:"setVisible",value:function(e){this.api._onDidVisibilityChange.fire({isVisible:e})}},{key:"setActive",value:function(e){this.api._onDidActiveChange.fire({isActive:e})}},{key:"layout",value:function(e,t){var n=Ta(this.orientation===le.HORIZONTAL?[e,t]:[t,e],2),i=n[0],o=n[1];xa(Ra(r.prototype),"layout",this).call(this,i,o)}},{key:"init",value:function(e){xa(Ra(r.prototype),"init",this).call(this,e),this._priority=e.priority,e.minimumSize&&(this._minimumSize=e.minimumSize),e.maximumSize&&(this._maximumSize=e.maximumSize),e.snap&&(this._snap=e.snap)}},{key:"toJSON",value:function(){var e;return Object.assign(Object.assign({},xa(Ra(r.prototype),"toJSON",this).call(this)),{minimumSize:(e=this.minimumSize,e<=0?void 0:e),maximumSize:function(e){return e===Number.MAX_SAFE_INTEGER||e===Number.POSITIVE_INFINITY?void 0:e}(this.maximumSize)})}},{key:"updateConstraints",value:function(){this.api._onDidConstraintsChange.fire({maximumSize:this._evaluatedMaximumSize,minimumSize:this._evaluatedMinimumSize})}}])&&za(t.prototype,n),i&&za(t,i),r}(fo),Ga=n(2784),Ha=n(8316);function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ba(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Fa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||Ua(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e){return function(e){if(Array.isArray(e))return Ma(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ua(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ua(e,t){if(e){if("string"===typeof e)return Ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(e,t):void 0}}var Za=function(e,t){var n=Wa(Ga.useState(),2),i=(n[0],n[1]),o=Ga.useRef(e.componentProps);return Ga.useImperativeHandle(t,(function(){return{update:function(e){o.current=Object.assign(Object.assign({},o.current),e),i(Date.now())}}}),[]),Ga.createElement(e.component,o.current)};Za.displayName="DockviewReactJsBridge";var Xa=ee(),$a=Ga.createContext({}),Ya=function(){function e(t,n,i,o,r){Ba(this,e),this.parent=t,this.portalStore=n,this.component=i,this.parameters=o,this.context=r,this.disposed=!1,this.createPortal()}var t,n,i;return t=e,(n=[{key:"update",value:function(e){var t;if(this.disposed)throw new Error("invalid operation: resource is already disposed");null===(t=this.componentInstance)||void 0===t||t.update(e)}},{key:"createPortal",value:function(){var e=this;if(this.disposed)throw new Error("invalid operation: resource is already disposed");if("function"!==typeof this.component)throw new Error("Invalid Operation. dockview only supports React Functional Components.");var t=Ga.createElement(Ga.forwardRef(Za),{component:this.component,componentProps:this.parameters,ref:function(t){e.componentInstance=t}}),n=this.context?Ga.createElement($a.Provider,{value:this.context},t):t,i=Ha.createPortal(n,this.parent,Xa.next());this.ref={portal:i,disposable:this.portalStore.addPortal(i)}}},{key:"dispose",value:function(){var e;null===(e=this.ref)||void 0===e||e.disposable.dispose(),this.disposed=!0}}])&&Fa(t.prototype,n),i&&Fa(t,i),e}(),Ka=function(){var e=Wa(Ga.useState([]),2),t=e[0],n=e[1];return Ga.useDebugValue("Portal count: ".concat(t.length)),[t,Ga.useCallback((function(e){n((function(t){return Ja(t).concat([e])}));var t=!1;return{dispose:function(){if(t)throw new Error("invalid operation: resource already disposed");t=!0,n((function(t){return t.filter((function(t){return t!==e}))}))}}}),[])]};function Qa(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function qa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eu=function(){function e(t,n,i){Qa(this,e),this.id=t,this.component=n,this.reactPortalStore=i,this._onDidFocus=new S,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new S,this.onDidBlur=this._onDidBlur.event,this._element=document.createElement("div"),this._element.className="dockview-react-part",this._actionsElement=document.createElement("div"),this._actionsElement.className="dockview-react-part"}var t,n,i;return t=e,(n=[{key:"element",get:function(){return this._element}},{key:"actions",get:function(){return this._actionsElement}},{key:"focus",value:function(){}},{key:"init",value:function(e){var t={api:e.api,containerApi:e.containerApi,actionsPortalElement:this._actionsElement,tabPortalElement:e.tab};this.part=new Ya(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi},t)}},{key:"toJSON",value:function(){return{id:this.id}}},{key:"update",value:function(e){var t;null===(t=this.part)||void 0===t||t.update(e.params)}},{key:"updateParentGroup",value:function(e,t){this._group=e}},{key:"layout",value:function(e,t){}},{key:"dispose",value:function(){var e,t;this._onDidFocus.dispose(),this._onDidBlur.dispose(),null===(e=this.part)||void 0===e||e.dispose(),null===(t=this.actionsPart)||void 0===t||t.dispose()}}])&&qa(t.prototype,n),i&&qa(t,i),e}();function tu(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function nu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var iu=function(){function e(t,n,i){tu(this,e),this.id=t,this.component=n,this.reactPortalStore=i,this._element=document.createElement("div"),this._element.className="dockview-react-part"}var t,n,i;return t=e,(n=[{key:"element",get:function(){return this._element}},{key:"focus",value:function(){}},{key:"init",value:function(e){this.part=new Ya(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi})}},{key:"update",value:function(e){var t;null===(t=this.part)||void 0===t||t.update(e.params)}},{key:"toJSON",value:function(){return{id:this.id}}},{key:"layout",value:function(e,t){}},{key:"updateParentGroup",value:function(e,t){}},{key:"dispose",value:function(){var e;null===(e=this.part)||void 0===e||e.dispose()}}])&&nu(t.prototype,n),i&&nu(t,i),e}();function ou(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function ru(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var au=function(){function e(t){ou(this,e),this.layout=t}var t,n,i;return t=e,(n=[{key:"fromJSON",value:function(e,t){var n,i,o,r=e.id,a=e.params,u=e.title,s=e.suppressClosable,l=e.view,c=new Vo({content:Xi(l.content.id,l.content.id,this.layout.options.components,this.layout.options.frameworkComponents,null===(n=this.layout.options.frameworkComponentFactory)||void 0===n?void 0:n.content),tab:(null===(i=l.tab)||void 0===i?void 0:i.id)?Xi(l.tab.id,l.tab.id,this.layout.options.tabComponents,this.layout.options.frameworkTabComponents,null===(o=this.layout.options.frameworkComponentFactory)||void 0===o?void 0:o.tab):new no}),f=new Ri(r,this.layout,new Nt(this.layout),t);return f.init({view:c,title:u,suppressClosable:s,params:a||{}}),f}}])&&ru(t.prototype,n),i&&ru(t,i),e}();function uu(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function su(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var lu=function(){function e(t,n,i){uu(this,e),this.id=t,this.component=n,this.reactPortalStore=i,this._groupRef={value:void 0},this._element=document.createElement("div"),this._element.className="dockview-react-part"}var t,n,i;return t=e,(n=[{key:"element",get:function(){return this._element}},{key:"init",value:function(e){var t=this;this.parameters=e,this.part=new Ya(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi,close:function(){t._groupRef.value&&e.containerApi.removeGroup(t._groupRef.value)}})}},{key:"focus",value:function(){}},{key:"update",value:function(e){var t,n;this.parameters&&(this.parameters.params=e.params),null===(t=this.part)||void 0===t||t.update({params:(null===(n=this.parameters)||void 0===n?void 0:n.params)||{}})}},{key:"toJSON",value:function(){return{id:this.id}}},{key:"layout",value:function(e,t){}},{key:"updateParentGroup",value:function(e,t){this._groupRef.value=e}},{key:"dispose",value:function(){var e;null===(e=this.part)||void 0===e||e.dispose()}}])&&su(t.prototype,n),i&&su(t,i),e}();function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hu=Ga.forwardRef((function(e,t){var n=Ga.useRef(null),i=Ga.useRef(),o=fu(Ka(),2),r=o[0],a=o[1];return Ga.useImperativeHandle(t,(function(){return n.current}),[]),Ga.useEffect((function(){if(e.disableAutoResizing)return function(){};var t=J(n.current,(function(e){var t,n=e.contentRect,o=n.width,r=n.height;null===(t=i.current)||void 0===t||t.layout(o,r)}));return function(){t.dispose()}}),[e.disableAutoResizing]),Ga.useEffect((function(){var t,o={content:{createComponent:function(e,t,n){return new eu(t,n,{addPortal:a})}},tab:{createComponent:function(e,t,n){return new iu(t,n,{addPortal:a})}},watermark:{createComponent:function(e,t,n){return new lu(t,n,{addPortal:a})}}},r=document.createElement("div"),u=new Qo(r,{frameworkComponentFactory:o,frameworkComponents:e.components,frameworkTabComponents:e.tabComponents,tabHeight:e.tabHeight,watermarkFrameworkComponent:e.watermarkComponent,styles:e.hideBorders?{separatorBorder:"transparent"}:void 0});null===(t=n.current)||void 0===t||t.appendChild(u.element),u.deserializer=new au(u);var s=n.current,l=s.clientWidth,c=s.clientHeight;return u.layout(l,c),e.onReady&&e.onReady({api:new Nt(u)}),i.current=u,function(){u.dispose(),r.remove()}}),[]),Ga.useEffect((function(){if(!i.current)return function(){};var t=i.current.onDidDrop((function(t){e.onDidDrop&&e.onDidDrop(t)}));return function(){t.dispose()}}),[e.onDidDrop]),Ga.useEffect((function(){i.current&&i.current.updateOptions({frameworkComponents:e.components})}),[e.components]),Ga.useEffect((function(){i.current&&i.current.updateOptions({watermarkFrameworkComponent:e.watermarkComponent})}),[e.watermarkComponent]),Ga.useEffect((function(){i.current&&i.current.updateOptions({showDndOverlay:e.showDndOverlay})}),[e.showDndOverlay]),Ga.useEffect((function(){i.current&&i.current.updateOptions({frameworkTabComponents:e.tabComponents})}),[e.tabComponents]),Ga.useEffect((function(){if(!e.onTabContextMenu||!i.current)return function(){};var t=i.current.onTabContextMenu((function(t){e.onTabContextMenu&&e.onTabContextMenu(t)}));return function(){t.dispose()}}),[e.onTabContextMenu]),Ga.createElement("div",{className:e.className,style:{height:"100%",width:"100%"},ref:n},r)}));function pu(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function du(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vu(e){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mu(e,t){return!t||"object"!==bu(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yu(e,t){return(yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}hu.displayName="DockviewComponent";var bu=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function gu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=vu(e);if(t){var o=vu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return mu(this,n)}}var wu=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yu(e,t)}(r,e);var t,n,i,o=gu(r);function r(e,t,n,i){var a;return pu(this,r),(a=o.call(this,e,t)).reactComponent=n,a.reactPortalStore=i,a}return t=r,(n=[{key:"getComponent",value:function(){var e;return new Ya(this.element,this.reactPortalStore,this.reactComponent,{params:(null===(e=this._params)||void 0===e?void 0:e.params)||{},api:this.api,containerApi:new It(this._params.accessor)})}}])&&du(t.prototype,n),i&&du(t,i),r}(La);function _u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Su(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ku=Ga.forwardRef((function(e,t){var n=Ga.useRef(null),i=Ga.useRef(),o=Su(Ka(),2),r=o[0],a=o[1];return Ga.useImperativeHandle(t,(function(){return n.current}),[]),Ga.useEffect((function(){if(e.disableAutoResizing)return function(){};var t=J(n.current,(function(e){var t,n=e.contentRect,o=n.width,r=n.height;null===(t=i.current)||void 0===t||t.layout(o,r)}));return function(){t.dispose()}}),[e.disableAutoResizing]),Ga.useEffect((function(){var t=new wr(n.current,{orientation:e.orientation||le.HORIZONTAL,frameworkComponents:e.components,frameworkWrapper:{createComponent:function(e,t,n){return new wu(e,t,n,{addPortal:a})}},proportionalLayout:"boolean"!==typeof e.proportionalLayout||e.proportionalLayout,styles:e.hideBorders?{separatorBorder:"transparent"}:void 0}),o=n.current,r=o.clientWidth,u=o.clientHeight;return t.layout(r,u),e.onReady&&e.onReady({api:new It(t)}),i.current=t,function(){t.dispose()}}),[]),Ga.useEffect((function(){i.current&&i.current.updateOptions({frameworkComponents:e.components})}),[e.components]),Ga.createElement("div",{className:e.className,style:{height:"100%",width:"100%"},ref:n},r)}));function Ou(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Cu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Du(e){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pu(e,t){return!t||"object"!==Au(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ku.displayName="SplitviewComponent";var Au=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function zu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Du(e);if(t){var o=Du(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Pu(this,n)}}var xu=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eu(e,t)}(r,e);var t,n,i,o=zu(r);function r(e,t,n,i){var a;return Ou(this,r),(a=o.call(this,e,t)).reactComponent=n,a.reactPortalStore=i,a}return t=r,(n=[{key:"getComponent",value:function(){var e;return new Ya(this.element,this.reactPortalStore,this.reactComponent,{params:(null===(e=this._params)||void 0===e?void 0:e.params)||{},api:this.api,containerApi:new Tt(this._params.accessor)})}}])&&Cu(t.prototype,n),i&&Cu(t,i),r}(So);function Ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ru(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ru(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ju=Ga.forwardRef((function(e,t){var n=Ga.useRef(null),i=Ga.useRef(),o=Iu(Ka(),2),r=o[0],a=o[1];return Ga.useImperativeHandle(t,(function(){return n.current}),[]),Ga.useEffect((function(){if(e.disableAutoResizing)return function(){};var t=J(n.current,(function(e){var t,n=e.contentRect,o=n.width,r=n.height;null===(t=i.current)||void 0===t||t.layout(o,r)}));return function(){t.dispose()}}),[e.disableAutoResizing]),Ga.useEffect((function(){var t,o=document.createElement("div"),r=new lr(o,{proportionalLayout:"boolean"!==typeof e.proportionalLayout||e.proportionalLayout,orientation:e.orientation||le.HORIZONTAL,frameworkComponents:e.components,frameworkComponentFactory:{createComponent:function(e,t,n){return new xu(e,t,n,{addPortal:a})}},styles:e.hideBorders?{separatorBorder:"transparent"}:void 0});null===(t=n.current)||void 0===t||t.appendChild(r.element);var u=n.current,s=u.clientWidth,l=u.clientHeight;return r.layout(s,l),e.onReady&&e.onReady({api:new Tt(r)}),i.current=r,function(){r.dispose(),o.remove()}}),[]),Ga.useEffect((function(){i.current&&i.current.updateOptions({frameworkComponents:e.components})}),[e.components]),Ga.createElement("div",{className:e.className,style:{height:"100%",width:"100%"},ref:n},r)}));function Tu(e,t){if(n=e,!(null!=(i=t)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function Nu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}ju.displayName="GridviewComponent";var Vu=function(){function e(t,n,i){Tu(this,e),this.id=t,this.component=n,this.reactPortalStore=i,this._element=document.createElement("div"),this._element.style.height="100%",this._element.style.width="100%"}var t,n,i;return t=e,(n=[{key:"element",get:function(){return this._element}},{key:"init",value:function(e){this.part=new Ya(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,title:e.title,containerApi:e.containerApi})}},{key:"toJSON",value:function(){return{id:this.id}}},{key:"update",value:function(e){var t;null===(t=this.part)||void 0===t||t.update(e.params)}},{key:"dispose",value:function(){var e;null===(e=this.part)||void 0===e||e.dispose()}}])&&Nu(t.prototype,n),i&&Nu(t,i),e}();function Lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Gu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Hu=Ga.forwardRef((function(e,t){var n=Ga.useRef(null),i=Ga.useRef(),o=Gu(Ka(),2),r=o[0],a=o[1];return Ga.useImperativeHandle(t,(function(){return n.current}),[]),Ga.useEffect((function(){if(e.disableAutoResizing)return function(){};var t=J(n.current,(function(e){var t,n=e.contentRect,o=n.width,r=n.height;null===(t=i.current)||void 0===t||t.layout(o,r)}));return function(){t.dispose()}}),[e.disableAutoResizing]),Ga.useEffect((function(){var t=function(e,t,n){return new Vu(e,n,{addPortal:a})},o=new Da(n.current,{frameworkComponents:e.components,components:{},headerComponents:{},disableDnd:e.disableDnd,headerframeworkComponents:e.headerComponents,frameworkWrapper:{header:{createComponent:t},body:{createComponent:t}}}),r=new jt(o),u=n.current,s=u.clientWidth,l=u.clientHeight;return o.layout(s,l),e.onReady&&e.onReady({api:r}),i.current=o,function(){o.dispose()}}),[]),Ga.useEffect((function(){i.current&&i.current.updateOptions({frameworkComponents:e.components})}),[e.components]),Ga.useEffect((function(){i.current&&i.current.updateOptions({headerframeworkComponents:e.headerComponents})}),[e.headerComponents]),Ga.useEffect((function(){if(!i.current)return function(){};var t=i.current,n=t.onDidDrop((function(n){e.onDidDrop&&e.onDidDrop(Object.assign(Object.assign({},n),{api:new jt(t)}))}));return function(){n.dispose()}}),[e.onDidDrop]),Ga.createElement("div",{className:e.className,style:{height:"100%",width:"100%"},ref:n},r)}));Hu.displayName="PaneviewComponent"}}]);